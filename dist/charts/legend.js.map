{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6*","webpack:///webpack/bootstrap a433c8ffe9601339258a?63cf*","webpack:///./src/charts/legend.js","webpack:///external \"d3\"?c0c4*"],"names":[],"mappings":"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","file":"legend.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"d3\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"d3\")) : factory(root[\"d3\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a433c8ffe9601339258a\n **/","define(function(require){\n    'use strict';\n\n    const d3 = require('d3');\n\n    /**\n     * @typdef D3Selection\n     * @type Array[]\n     */\n\n    /**\n     * @fileOverview Legend Component reusable API class that renders a\n     * simple and configurable legend element.\n     *\n     * @tutorial legend\n     * @exports charts/legend\n     * @requires d3\n     * @version 0.0.1\n     */\n    return function module() {\n\n        let margin = {\n                top: 20,\n                right: 10,\n                bottom: 10,\n                left: 10\n            },\n            width = 320,\n            height = 180,\n\n            lineMargin = 10,\n\n            circleRadius = 8,\n            circleYOffset = -5,\n\n            textSize = 12,\n            textLetterSpacing = 0.5,\n\n            valueReservedSpace = 40,\n            numberLetterSpacing = 0.8,\n            numberFormat = d3.format('s'),\n\n            isFadedClassName = 'is-faded',\n\n            // colors\n            colorScale = d3.scale.category20c(),\n            colorScheme = ['#00AF38', '#41C2C9', '#F6C664', '#F4693A', '#9A66D7'],\n\n            entries,\n            chartWidth, chartHeight,\n            data,\n            svg;\n\n\n        /**\n         * This function creates the graph using the selection as container\n         * @param  {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         */\n        function exports(_selection) {\n            /* @param {object} _data The data to attach and generate the chart */\n            _selection.each(function(_data){\n                chartWidth = width - margin.left - margin.right;\n                chartHeight = height - margin.top - margin.bottom;\n                data = _data;\n\n                buildColorScale();\n                buildSVG(this);\n                drawEntries();\n            });\n        }\n\n        /**\n         * Builds containers for the legend\n         * Also applies the Margin convention\n         * @private\n         */\n        function buildContainerGroups() {\n            let container = svg.append('g')\n                .classed('legend-container-group', true)\n                .attr({\n                    transform: `translate(${margin.left},${margin.top})`\n                });\n\n            container\n                .append('g')\n                .classed('legend-group', true);\n        }\n\n        /**\n         * Builds color scale for chart, if any colorScheme was defined\n         * @private\n         */\n        function buildColorScale() {\n            if (colorScheme) {\n                colorScale = d3.scale.ordinal().range(colorScheme);\n            }\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container) {\n            if (!svg) {\n                svg = d3.select(container)\n                    .append('svg')\n                    .classed('britechart britechart-legend', true);\n\n                buildContainerGroups();\n            }\n            svg.transition().attr({\n                width: width + margin.left + margin.right,\n                height: height + margin.top + margin.bottom\n            });\n        }\n\n        /**\n         * Removes the faded class from all the entry lines\n         */\n        function cleanFadedLines() {\n            entries.classed(isFadedClassName, false);\n        }\n\n        /**\n         * Draws the entries of the legend\n         * @private\n         */\n        function drawEntries() {\n            entries = svg.select('.legend-group')\n                .selectAll('g.legend-line')\n                .data(data);\n\n            // Enter\n            entries.enter()\n                .append('g')\n                .classed('legend-line', true)\n                .attr('data-item', d => d.id )\n                .attr('transform', function(d, i) {\n                    let horizontalOffset = 2 * circleRadius + 10,\n                        lineHeightBis = chartHeight/data.length,\n                        verticalOffset = i * lineHeightBis;\n\n                    return `translate(${horizontalOffset},${verticalOffset})`;\n                });\n\n            entries\n                .append('circle')\n                .classed('legend-circle', true)\n                .attr({\n                    'cx': 0,\n                    'cy': circleYOffset,\n                    'r': circleRadius\n                })\n                .style({\n                    'fill': function(d) {\n                        return colorScale(d.quantity);\n                    },\n                    'stroke-width': 1\n                });\n\n            entries\n                .append('text')\n                .classed('legend-entry-name', true)\n                .text( d => d.name )\n                .attr({\n                    x: (2 * circleRadius) + lineMargin\n                })\n                .style({\n                    'font-size': `${textSize}px`,\n                    'letter-spacing': `${textLetterSpacing}px`\n                });\n\n            entries\n                .append('text')\n                .classed('legend-entry-value', true)\n                .text( d => numberFormat(d['quantity']) )\n                .attr({\n                    x: chartWidth - valueReservedSpace\n                })\n                .style({\n                    'font-size': `${textSize}px`,\n                    'letter-spacing': `${numberLetterSpacing}px`,\n                    'text-anchor': 'end',\n                    'startOffset': '100%'\n                });\n\n            // Exit\n            entries.exit()\n                .transition().style({ opacity: 0 }).remove();\n        }\n\n        /**\n         * Applies the faded class to all lines but the one that has the given id\n         * @param  {number} exceptionItemId Id of the line that needs to stay the same\n         */\n        function fadeLinesBut(exceptionItemId) {\n            entries.classed(isFadedClassName, true);\n            d3.select(`[data-item=\"${exceptionItemId}\"]`)\n                .classed(isFadedClassName, false);\n        }\n\n        /**\n         * Clears the highlighted line entry\n         */\n        exports.clearHighlight = function() {\n            cleanFadedLines();\n        };\n\n        /**\n         * Gets or Sets the height of the legend chart\n         * @param  {number} _x Desired width for the chart\n         * @return { height | module} Current height or Legend module to chain calls\n         * @public\n         */\n        exports.height = function(_x) {\n            if (!arguments.length) {\n                return height;\n            }\n            height = _x;\n            return this;\n        };\n\n        /**\n         * Highlights a line entry by fading the rest of lines\n         * @param  {number} entryId ID of the entry line\n         */\n        exports.highlight = function(entryId) {\n            cleanFadedLines();\n            fadeLinesBut(entryId);\n        };\n\n        /**\n         * Gets or Sets the margin of the legend chart\n         * @param  {object} _x Margin object to get/set\n         * @return { margin | module} Current margin or Legend module to chain calls\n         * @public\n         */\n        exports.margin = function(_x) {\n            if (!arguments.length) {\n                return margin;\n            }\n            margin = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the width of the legend chart\n         * @param  {number} _x Desired width for the graph\n         * @return { width | module} Current width or Legend module to chain calls\n         * @public\n         */\n        exports.width = function(_x) {\n            if (!arguments.length) {\n                return width;\n            }\n            width = _x;\n            return this;\n        };\n\n        return exports;\n\n    };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/charts/legend.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"d3\"\n ** module id = 1\n ** module chunks = 0 1 2 3 4\n **/"],"sourceRoot":""}