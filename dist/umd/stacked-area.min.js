!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("underscore"));else if("function"==typeof define&&define.amd)define(["d3","underscore"],e);else{var r="object"==typeof exports?e(require("d3"),require("underscore")):e(t.d3,t.underscore);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n;n=function(t){"use strict";var e=r(1),n=r(8),a=r(2),o=r(7);return function(){function t(t){t.each(function(t){ct=R-D.left-D.right,it=M-D.top-D.bottom,st=f(t),ut=e.nest().key(mt).entries(n(t).sortBy("date")),u(),l(),i(),d(this),y(),v(),m(),k()&&(g(),A(),r())})}function r(){ot.on("mouseover",C).on("mouseout",b).on("mousemove",T)}function c(t,e){var r=30,n=30,a=Math.ceil(t/(r+n));return Math.min(e,a)}function i(){I=e.svg.axis().scale(B).ticks(c(ct,ut.length)).tickFormat(Et).tickSize(10,0,0).outerTickSize([50]).tickPadding([10]).orient("bottom"),L=e.svg.axis().scale(B).ticks(e.time.months).tickFormat(xt).tickSize(10,0,0).tickPadding([10]).orient("bottom"),N=e.svg.axis().scale(w).ticks(F).tickFormat(At).tickSize(R,0,0).outerTickSize([50]).tickPadding([4]).orient("right")}function s(){var t=ot.append("g").classed("container-group",!0).attr("transform","translate("+D.left+","+D.top+")");t.append("g").classed("x-axis-group",!0).append("g").classed("x axis",!0),t.selectAll(".x-axis-group").append("g").classed("month-axis",!0),t.append("g").classed("y-axis-group axis",!0),t.append("g").classed("chart-group",!0),t.append("g").classed("metadata-group",!0)}function u(){var t=e.layout.stack().offset("zero").values(pt).x(mt).y(ht),r=e.nest().key(vt);V=t(r.entries(p(st))),q=t(r.entries(st))}function l(){B=e.time.scale().domain(e.extent(st,function(t){var e=t.date;return e})).range([0,ct]),w=e.scale.linear().domain([0,e.max(st,function(t){var e=t.y0,r=t.y;return e+r})]).range([it,0]).nice([F+1]),j=e.scale.ordinal().range(H).domain(st.map(vt));var t=j.range();Y=j.domain().reduce(function(e,r,n){return e[r]=t[n],e},{})}function d(t){ot||(ot=e.select(t).append("svg").classed("britechart stacked-area",!0),s()),ot.transition().ease(nt).attr({width:R,height:M})}function f(t){return t.map(function(t){return t.date=yt(t[dt]),t[ft]=+t[ft],t})}function h(){X.selectAll(".circle-container").remove()}function p(t){return f(JSON.parse(JSON.stringify(t)).map(function(t){return t[ft]=0,t}))}function v(){ot.select(".x-axis-group .axis.x").attr("transform","translate( 0, "+it+" )").call(I),ot.select(".x-axis-group .month-axis").attr("transform","translate(0, "+(it+P)+")").call(L),ot.select(".y-axis-group.axis").attr("transform","translate( "+-D.left+", 0)").call(N),e.selectAll(".y-axis-group .tick text").attr("transform","translate( "+-R+", "+U+")")}function m(){var t=ot.select(".chart-group").selectAll(".dots").data(q).enter().append("g").attr({"class":"dots",d:function(t){var e=t.values;return K(e)},"clip-path":"url(#clip)"});t.selectAll(".dot").data(function(t,e){var r=t.values;return r.map(function(t){return{index:e,point:t}})}).enter().append("circle").attr("class","dot").attr("r",function(){return tt}).attr("fill",function(){return et}).attr("stroke-width","0").attr("stroke",rt).attr("transform",function(t){var e=t.point,r=B(e.date);$[r]=$[r]||[],$[r].push(t);var n=e.date,a=e.y,o=e.y0;return"translate( "+B(n)+", "+w(a+o)+" )"})}function g(){Z=ot.select(".metadata-group").append("rect").attr({"class":"overlay",y1:0,y2:it,height:it,width:ct,fill:"rgba(0,0,0,0)"}).style("display","none")}function y(){var t=ot.select(".chart-group").selectAll(".layer").data(V);K=e.svg.area().interpolate("cardinal").x(function(t){var e=t.date;return B(e)}).y0(function(t){var e=t.y0;return w(e)}).y1(function(t){var e=t.y0,r=t.y;return w(e+r)}),t.enter().append("path").attr("class","layer").attr("d",function(t){var e=t.values;return K(e)}).style("fill",function(t){var e=t.key;return Y[e]}),ot.select(".chart-group").selectAll(".layer").data(q).transition().delay(function(t,e){return W[e]}).duration(at).ease(nt).attr("d",function(t){var e=t.values;return K(e)}).style("opacity",z).style("fill",function(t){var e=t.key;return Y[e]}),t.exit().transition().style({opacity:0}).remove()}function A(){X=ot.select(".metadata-group").append("g").attr("class","vertical-marker-container").attr("transform","translate(9999, 0)"),_=X.selectAll("path").data([{x1:0,y1:0,x2:0,y2:0}]).enter().append("line").classed("vertical-marker",!0).attr({x1:0,y1:it,x2:0,y2:0})}function E(t){return e.mouse(t)[0]}function x(t){var e=void 0,r=void 0,n=ut.map(function(t){return t.key=new Date(t.key),t});return e=(B(n[1].key)-B(n[0].key))/2,r=n.find(function(r){var n=r.key;return Math.abs(B(n)-t)<=e})}function T(){var t=x(E(this)-D.left),e=void 0;t&&(e=B(new Date(t.key)),O(e),S(t),Tt.customMouseMove(t,Y,e))}function b(t){Z.style("display","none"),_.classed("bc-is-active",!1),X.attr("transform","translate(9999, 0)"),Tt.customMouseOut(t)}function C(t){Z.style("display","block"),_.classed("bc-is-active",!0),Tt.customMouseOver(t)}function S(t){var e=0;h(),t.values=t.values.filter(function(t){return!!t}).sort(function(t,e){return G[t.el]>G[e.el]}),t.values.forEach(function(r,n){var a=r.name,o=X.append("g").classed("circle-container",!0),c=12;e+=t.values[n][ft],o.append("circle").classed("data-point-highlighter",!0).attr({cx:c,cy:0,r:5}).style({"stroke-width":3,stroke:Y[a]}),o.attr("transform","translate( "+-c+", "+w(e)+" )")})}function O(t){X.attr("transform","translate("+t+",0)")}function k(){return R>lt}var D={left:40,right:20,top:60,bottom:40},R=960,M=500,B=void 0,I=void 0,L=void 0,w=void 0,N=void 0,P=30,F=5,U=-8,H=o.britechartsColorSchema,G=H.reduce(function(t,e,r){return t[e]=r,t},{}),z=.8,j=void 0,Y=void 0,q=void 0,V=void 0,K=void 0,J=8,Q=20,W=e.range(Q,J*Q,Q),Z=void 0,X=void 0,_=void 0,$={},tt=1.5,et="#c0c6cc",rt="#ffffff",nt="quad-out",at=1e3,ot=void 0,ct=void 0,it=void 0,st=void 0,ut=void 0,lt=480,dt="dateUTC",ft="views",ht=function(t){return t[ft]},pt=function(t){var e=t.values;return e},vt=function(t){var e=t.name;return e},mt=function(t){var e=t.date;return e},gt=e.time.format.utc("%Y-%m-%dT%H:%M:%SZ"),yt=gt.parse,At=e.format("s"),Et=e.time.format("%e"),xt=e.time.format("%b"),Tt=e.dispatch("customMouseOver","customMouseOut","customMouseMove");return t.ease=function(t){return arguments.length?(nt=t,this):nt},t.height=function(t){return arguments.length?(M=t,this):M},t.margin=function(t){return arguments.length?(D=t,this):D},t.tooltipThreshold=function(t){return arguments.length?(lt=t,this):lt},t.width=function(t){return arguments.length?(R=t,this):R},t.valueLabel=function(t){return arguments.length?(ft=t,this):ft},t.dateLabel=function(t){return arguments.length?(dt=t,this):dt},t.exportChart=function(e){a.call(t,ot,e)},e.rebind(t,Tt,"on"),t}}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(e,r){e.exports=t},function(t,e,r){var n;n=function(t){"use strict";function e(t,e){var r=this.width(),i=this.height(),s=a(t),u=o(r,i),l=c(s);l.onload=n.bind(l,u,e)}function n(t,e,r){r.preventDefault(),i(this,t),s(t,e||d.defaultFilename)}function a(t){var e=u.initializeSerializer();if(t){t.attr({version:1.1,xmlns:"http://www.w3.org/2000/svg"});var r=e(t.node());return r.replace(">",">"+d.styleBackgroundString)}}function o(t,e){var r=document.createElement("canvas");return r.height=e,r.width=t,r}function c(t){var e=new Image;return e.src=""+d.imageSourceBase+l(t),e}function i(t,e){e.getContext("2d").drawImage(t,0,0)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"britechart.png",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",n=t.toDataURL(r),a=document.createElement("a");a.href=n,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}var u=r(3),l=window.btoa;l||(l=r(4).encode);var d={styleClass:"britechartStyle",defaultFilename:"britechart.png",chartBackground:"white",imageSourceBase:"data:image/svg+xml;base64,",get styleBackgroundString(){return"<style>svg{background:"+this.chartBackground+";}</style>"}};return e}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){"use strict";t.exports=function(){return{initializeSerializer:function(){function t(t){var e={},r=document.body.appendChild(document.createElement(t)),n=window.getComputedStyle(r);return[].forEach.call(n,function(t){e[t]=n[t]}),document.body.removeChild(r),e}function e(e){return e=e.toUpperCase(),n[e]||(n[e]=t(e)),n[e]}function r(t){var r=[],n=void 0,o=void 0,c=void 0,i=void 0;return t&&t.nodeType===Node.ELEMENT_NODE?(r=[],n=t.querySelectorAll("*"),[].forEach.call(n,function(t,n){a[t.tagName]||(o=window.getComputedStyle(t),c=e(t.tagName),r[n]=t.style.cssText,[].forEach.call(o,function(e){o[e]!==c[e]&&(t.style[e]=o[e])}))}),i=t.outerHTML,n=[].map.call(n,function(t,e){return t.style.cssText=r[e],t}),i):void console.error("Error: Object passed in to serializeWithSyles not of nodeType Node.ELEMENT_NODE")}var n={},a={BASE:!0,HEAD:!0,HTML:!0,META:!0,NOFRAME:!0,NOSCRIPT:!0,PARAM:!0,SCRIPT:!0,STYLE:!0,TITLE:!0},o=["A","ABBR","ADDRESS","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BDI","BDO","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","DATALIST","DD","DEL","DETAILS","DFN","DIV","DL","DT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMG","INPUT","INS","KBD","LABEL","LEGEND","LI","LINK","MAP","MARK","MATH","MENU","META","METER","NAV","NOBR","NOSCRIPT","OBJECT","OL","OPTION","OPTGROUP","OUTPUT","P","PARAM","PRE","PROGRESS","Q","RP","RT","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SMALL","SOURCE","SPAN","STRONG","STYLE","SUB","SUMMARY","SUP","SVG","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","U","UL","VAR","VIDEO","WBR"];return[].forEach.call(o,function(e){a[e]||(n[e]=t(e))}),r}}}()},function(t,e,r){var n;(function(t,a){!function(o){var c="object"==typeof e&&e,i=("object"==typeof t&&t&&t.exports==c&&t,"object"==typeof a&&a);i.global!==i&&i.window!==i||(o=i);var s=function(t){this.message=t};s.prototype=new Error,s.prototype.name="InvalidCharacterError";var u=function(t){throw new s(t)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,f=function(t){t=String(t).replace(d,"");var e=t.length;e%4==0&&(t=t.replace(/==?$/,""),e=t.length),(e%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,a=0,o="",c=-1;++c<e;)n=l.indexOf(t.charAt(c)),r=a%4?64*r+n:n,a++%4&&(o+=String.fromCharCode(255&r>>(-2*a&6)));return o},h=function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,r,n,a,o=t.length%3,c="",i=-1,s=t.length-o;++i<s;)e=t.charCodeAt(i)<<16,r=t.charCodeAt(++i)<<8,n=t.charCodeAt(++i),a=e+r+n,c+=l.charAt(a>>18&63)+l.charAt(a>>12&63)+l.charAt(a>>6&63)+l.charAt(63&a);return 2==o?(e=t.charCodeAt(i)<<8,r=t.charCodeAt(++i),a=e+r,c+=l.charAt(a>>10)+l.charAt(a>>4&63)+l.charAt(a<<2&63)+"="):1==o&&(a=t.charCodeAt(i),c+=l.charAt(a>>2)+l.charAt(a<<4&63)+"=="),c},p={encode:h,decode:f,version:"0.1.0"};n=function(){return p}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(5)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},,function(t,e,r){var n;n=function(t){var e=["#6CEDC8","#3DC3C9","#FBC670","#F766B8","#998EE3","#824a9e"],r=["#F8F8FA","#EFF2F5","#D2D6DF","#C3C6CF","#ADB0B6","#666A73","#45494E","#363A43","#282C35"],n={greenBlueGradient:["#39C7EA","#4CDCBA"]},a=["#f9e9c5","#fcc870","#ffa71a","#fb8825","#f6682f","#db5a2c","#bf4c28","#a43b1c","#892a10"],o=["#ccf7f6","#70e4e0","#00d8d2","#00acaf","#007f8c","#005e66","#003c3f","#002d2f","#0d2223"],c=["#ccfffe","#94f7f4","#00fff8","#1de1e1","#39c2c9","#2e9a9d","#227270","#1a5957","#133f3e"],i=["#edfff7","#d7ffef","#c0ffe7","#95f5d7","#6aedc7","#59c3a3","#479980","#34816a","#206953"],s=["#f9f2b3","#fbe986","#fce05a","#fed72d","#ffce00","#fcc11c","#f9b438","#eda629","#e09819"],u=["#fdd1ea","#fb9cd2","#f866b9","#fc40b6","#ff1ab3","#e3239d","#c62c86","#a62073","#85135f"],l=["#ddd6fc","#bbb1f0","#998ce3","#8e6bc1","#824a9e","#77337f","#6b1c60","#591650","#470f3f"],d=["#ffd8d4","#ffb5b0","#ff938c","#ff766c","#ff584c","#f04b42","#e03d38","#be2e29","#9c1e19"];return{britechartsColorSchema:e,britechartsGreySchema:r,britechartGradients:n,extendedOrangeColorSchema:a,extendedBlueColorSchema:o,extendedLightBlueColorSchema:c,extendedGreenColorSchema:i,extendedYellowColorSchema:s,extendedPinkColorSchema:u,extendedPurpleColorSchema:l,extendedRedColorSchema:d}}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,r){t.exports=e}])});
//# sourceMappingURL=stacked-area.min.js.map