!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"),require("underscore"));else if("function"==typeof define&&define.amd)define(["d3","underscore"],e);else{var r="object"==typeof exports?e(require("d3"),require("underscore")):e(t.d3,t.underscore);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(t,e){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){var n;n=function(t){"use strict";var e=r(1),n=r(2),a=r(7);return function(){function t(t){t.each(function(t){ot=b-k.left-k.right,it=R-k.top-k.bottom,ct=d(t),st=e.nest().key(ht).entries(a(t).sortBy("date")),s(),u(),i(),l(this),m(),v(),h(),D()&&(g(),y(),r())})}function r(){at.on("mouseover",S).on("mouseout",x).on("mousemove",T)}function o(t,e){var r=30,n=30,a=Math.ceil(t/(r+n));return Math.min(e,a)}function i(){I=e.svg.axis().scale(M).ticks(o(ot,st.length)).tickFormat(Et).tickSize(10,0,0).outerTickSize([50]).tickPadding([10]).orient("bottom"),L=e.svg.axis().scale(M).ticks(e.time.months).tickFormat(At).tickSize(10,0,0).tickPadding([10]).orient("bottom"),w=e.svg.axis().scale(N).ticks(P).tickFormat(yt).tickSize(b,0,0).outerTickSize([50]).tickPadding([4]).orient("right")}function c(){var t=at.append("g").classed("container-group",!0).attr("transform","translate("+k.left+","+k.top+")");t.append("g").classed("x-axis-group",!0).append("g").classed("x axis",!0),t.selectAll(".x-axis-group").append("g").classed("month-axis",!0),t.append("g").classed("y-axis-group axis",!0),t.append("g").classed("chart-group",!0),t.append("g").classed("metadata-group",!0)}function s(){var t=e.layout.stack().offset("zero").values(pt).x(ht).y(ft),r=e.nest().key(vt);q=t(r.entries(p(ct))),Y=t(r.entries(ct))}function u(){M=e.time.scale().domain(e.extent(ct,function(t){var e=t.date;return e})).range([0,ot]),N=e.scale.linear().domain([0,e.max(ct,function(t){var e=t.y0,r=t.y;return e+r})]).range([it,0]).nice([P+1]),j=e.scale.ordinal().range(U).domain(ct.map(vt));var t=j.range();G=j.domain().reduce(function(e,r,n){return e[r]=t[n],e},{})}function l(t){at||(at=e.select(t).append("svg").classed("britechart stacked-area",!0),c()),at.transition().ease(rt).attr({width:b,height:R})}function d(t){return t.map(function(t){return t.date=mt(t[lt]),t[dt]=+t[dt],t})}function f(){Z.selectAll(".circle-container").remove()}function p(t){return d(JSON.parse(JSON.stringify(t)).map(function(t){return t[dt]=0,t}))}function v(){at.select(".x-axis-group .axis.x").attr("transform","translate( 0, "+it+" )").call(I),at.select(".x-axis-group .month-axis").attr("transform","translate(0, "+(it+B)+")").call(L),at.select(".y-axis-group.axis").attr("transform","translate( "+-k.left+", 0)").call(w),e.selectAll(".y-axis-group .tick text").attr("transform","translate( "+-b+", "+F+")")}function h(){var t=at.select(".chart-group").selectAll(".dots").data(Y).enter().append("g").attr({"class":"dots",d:function(t){var e=t.values;return V(e)},"clip-path":"url(#clip)"});t.selectAll(".dot").data(function(t,e){var r=t.values;return r.map(function(t){return{index:e,point:t}})}).enter().append("circle").attr("class","dot").attr("r",function(){return $}).attr("fill",function(){return tt}).attr("stroke-width","0").attr("stroke",et).attr("transform",function(t){var e=t.point,r=M(e.date);_[r]=_[r]||[],_[r].push(t);var n=e.date,a=e.y,o=e.y0;return"translate( "+M(n)+", "+N(a+o)+" )"})}function g(){W=at.select(".metadata-group").append("rect").attr({"class":"overlay",y1:0,y2:it,height:it,width:ot,fill:"rgba(0,0,0,0)"}).style("display","none")}function m(){var t=at.select(".chart-group").selectAll(".layer").data(q);V=e.svg.area().interpolate("cardinal").x(function(t){var e=t.date;return M(e)}).y0(function(t){var e=t.y0;return N(e)}).y1(function(t){var e=t.y0,r=t.y;return N(e+r)}),t.enter().append("path").attr("class","layer").attr("d",function(t){var e=t.values;return V(e)}).style("fill",function(t){var e=t.key;return G[e]}),at.select(".chart-group").selectAll(".layer").data(Y).transition().delay(function(t,e){return Q[e]}).duration(nt).ease(rt).attr("d",function(t){var e=t.values;return V(e)}).style("opacity",z).style("fill",function(t){var e=t.key;return G[e]}),t.exit().transition().style({opacity:0}).remove()}function y(){Z=at.select(".metadata-group").append("g").attr("class","vertical-marker-container").attr("transform","translate(9999, 0)"),X=Z.selectAll("path").data([{x1:0,y1:0,x2:0,y2:0}]).enter().append("line").classed("vertical-marker",!0).attr({x1:0,y1:it,x2:0,y2:0})}function E(t){return e.mouse(t)[0]}function A(t){var e=void 0,r=void 0,n=st.map(function(t){return t.key=new Date(t.key),t});return e=(M(n[1].key)-M(n[0].key))/2,r=n.find(function(r){var n=r.key;return Math.abs(M(n)-t)<=e})}function T(){var t=A(E(this)-k.left),e=void 0;t&&(e=M(new Date(t.key)),O(e),C(t),Tt.customMouseMove(t,G,e))}function x(t){W.style("display","none"),X.classed("bc-is-active",!1),Z.attr("transform","translate(9999, 0)"),Tt.customMouseOut(t)}function S(t){W.style("display","block"),X.classed("bc-is-active",!0),Tt.customMouseOver(t)}function C(t){var e=0;f(),t.values=t.values.filter(function(t){return!!t}).sort(function(t,e){return H[t.el]>H[e.el]}),t.values.forEach(function(r,n){var a=r.name,o=Z.append("g").classed("circle-container",!0),i=12;e+=t.values[n][dt],o.append("circle").classed("data-point-highlighter",!0).attr({cx:i,cy:0,r:5}).style({"stroke-width":3,stroke:G[a]}),o.attr("transform","translate( "+-i+", "+N(e)+" )")})}function O(t){Z.attr("transform","translate("+t+",0)")}function D(){return b>ut}var k={left:40,right:20,top:60,bottom:40},b=960,R=500,M=void 0,I=void 0,L=void 0,N=void 0,w=void 0,B=30,P=5,F=-8,U=["#051C48","#9963D5","#FF4D7C","#E5C400","#4DDB86","#4DC2F5"],H={"#051C48":0,"#9963D5":1,"#FF4D7C":2,"#E5C400":3,"#4DDB86":4,"#4DC2F5":5},z=.8,j=void 0,G=void 0,Y=void 0,q=void 0,V=void 0,K=8,J=20,Q=e.range(J,K*J,J),W=void 0,Z=void 0,X=void 0,_={},$=1.5,tt="#c0c6cc",et="#ffffff",rt="quad-out",nt=1e3,at=void 0,ot=void 0,it=void 0,ct=void 0,st=void 0,ut=480,lt="dateUTC",dt="views",ft=function(t){return t[dt]},pt=function(t){var e=t.values;return e},vt=function(t){var e=t.name;return e},ht=function(t){var e=t.date;return e},gt=e.time.format.utc("%Y-%m-%dT%H:%M:%SZ"),mt=gt.parse,yt=e.format("s"),Et=e.time.format("%e"),At=e.time.format("%b"),Tt=e.dispatch("customMouseOver","customMouseOut","customMouseMove");return t.ease=function(t){return arguments.length?(rt=t,this):rt},t.height=function(t){return arguments.length?(R=t,this):R},t.margin=function(t){return arguments.length?(k=t,this):k},t.tooltipThreshold=function(t){return arguments.length?(ut=t,this):ut},t.width=function(t){return arguments.length?(b=t,this):b},t.valueLabel=function(t){return arguments.length?(dt=t,this):dt},t.dateLabel=function(t){return arguments.length?(lt=t,this):lt},t.exportChart=function(e){n.call(t,at,e)},e.rebind(t,Tt,"on"),t}}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(e,r){e.exports=t},function(t,e,r){var n;n=function(t){"use strict";function e(t,e){var r=this.width(),c=this.height(),s=a(t),u=o(r,c),l=i(s);l.onload=n.bind(l,u,e)}function n(t,e,r){r.preventDefault(),c(this,t),s(t,e||d.defaultFilename)}function a(t){var e=u.initializeSerializer();if(t){t.attr({version:1.1,xmlns:"http://www.w3.org/2000/svg"});var r=e(t.node());return r.replace(">",">"+d.styleBackgroundString)}}function o(t,e){var r=document.createElement("canvas");return r.height=e,r.width=t,r}function i(t){var e=new Image;return e.src=""+d.imageSourceBase+l(t),e}function c(t,e){e.getContext("2d").drawImage(t,0,0)}function s(t){var e=arguments.length<=1||void 0===arguments[1]?"britechart.png":arguments[1],r=arguments.length<=2||void 0===arguments[2]?"image/png":arguments[2],n=t.toDataURL(r),a=document.createElement("a");a.href=n,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}var u=r(3),l=window.btoa;l||(l=r(4).encode);var d={styleClass:"britechartStyle",defaultFilename:"britechart.png",chartBackground:"white",imageSourceBase:"data:image/svg+xml;base64,",get styleBackgroundString(){return"<style>svg{background:"+this.chartBackground+";}</style>"}};return e}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){"use strict";t.exports=function(){return{initializeSerializer:function(){function t(t){var e={},r=document.body.appendChild(document.createElement(t)),n=window.getComputedStyle(r);return[].forEach.call(n,function(t){e[t]=n[t]}),document.body.removeChild(r),e}function e(e){return e=e.toUpperCase(),n[e]||(n[e]=t(e)),n[e]}function r(t){var r=[],n=void 0,o=void 0,i=void 0,c=void 0;return t&&t.nodeType===Node.ELEMENT_NODE?(r=[],n=t.querySelectorAll("*"),[].forEach.call(n,function(t,n){a[t.tagName]||(o=window.getComputedStyle(t),i=e(t.tagName),r[n]=t.style.cssText,[].forEach.call(o,function(e){o[e]!==i[e]&&(t.style[e]=o[e])}))}),c=t.outerHTML,n=[].map.call(n,function(t,e){return t.style.cssText=r[e],t}),c):void console.error("Error: Object passed in to serializeWithSyles not of nodeType Node.ELEMENT_NODE")}var n={},a={BASE:!0,HEAD:!0,HTML:!0,META:!0,NOFRAME:!0,NOSCRIPT:!0,PARAM:!0,SCRIPT:!0,STYLE:!0,TITLE:!0},o=["A","ABBR","ADDRESS","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BDI","BDO","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","DATALIST","DD","DEL","DETAILS","DFN","DIV","DL","DT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMG","INPUT","INS","KBD","LABEL","LEGEND","LI","LINK","MAP","MARK","MATH","MENU","META","METER","NAV","NOBR","NOSCRIPT","OBJECT","OL","OPTION","OPTGROUP","OUTPUT","P","PARAM","PRE","PROGRESS","Q","RP","RT","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SMALL","SOURCE","SPAN","STRONG","STYLE","SUB","SUMMARY","SUP","SVG","TABLE","TBODY","TD","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","U","UL","VAR","VIDEO","WBR"];return[].forEach.call(o,function(e){a[e]||(n[e]=t(e))}),r}}}()},function(t,e,r){var n;(function(t,a){!function(o){var i="object"==typeof e&&e,c=("object"==typeof t&&t&&t.exports==i&&t,"object"==typeof a&&a);c.global!==c&&c.window!==c||(o=c);var s=function(t){this.message=t};s.prototype=new Error,s.prototype.name="InvalidCharacterError";var u=function(t){throw new s(t)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=/[\t\n\f\r ]/g,f=function(t){t=String(t).replace(d,"");var e=t.length;e%4==0&&(t=t.replace(/==?$/,""),e=t.length),(e%4==1||/[^+a-zA-Z0-9\/]/.test(t))&&u("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,a=0,o="",i=-1;++i<e;)n=l.indexOf(t.charAt(i)),r=a%4?64*r+n:n,a++%4&&(o+=String.fromCharCode(255&r>>(-2*a&6)));return o},p=function(t){t=String(t),/[^\0-\xFF]/.test(t)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var e,r,n,a,o=t.length%3,i="",c=-1,s=t.length-o;++c<s;)e=t.charCodeAt(c)<<16,r=t.charCodeAt(++c)<<8,n=t.charCodeAt(++c),a=e+r+n,i+=l.charAt(a>>18&63)+l.charAt(a>>12&63)+l.charAt(a>>6&63)+l.charAt(63&a);return 2==o?(e=t.charCodeAt(c)<<8,r=t.charCodeAt(++c),a=e+r,i+=l.charAt(a>>10)+l.charAt(a>>4&63)+l.charAt(a<<2&63)+"="):1==o&&(a=t.charCodeAt(c),i+=l.charAt(a>>2)+l.charAt(a<<4&63)+"=="),i},v={encode:p,decode:f,version:"0.1.0"};n=function(){return v}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}(this)}).call(e,r(5)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},,function(t,r){t.exports=e}])});
//# sourceMappingURL=stacked-area.min.js.map