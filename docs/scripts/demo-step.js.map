{"version":3,"sources":["webpack:///./demos/demo-step.js","webpack:///./~/.1.0.7@d3-axis/build/d3-axis.js?d99f***","webpack:///./src/charts/helpers/exportChart.js?f69b****","webpack:///./src/charts/helpers/serializeWithStyles.js?b833****","webpack:///./~/.0.1.0@base-64/base64.js?99c7****","webpack:///(webpack)/buildin/module.js?c3c2****","webpack:///./src/charts/mini-tooltip.js?dd3e","webpack:///./src/charts/step.js","webpack:///./test/fixtures/stepChartDataBuilder.js","webpack:///./test/json/stepDataSmall.json"],"names":["d3Selection","require","PubSub","step","miniTooltip","dataBuilder","createStepChart","stepChart","tooltip","testDataSet","StepDataBuilder","stepContainer","select","containerWidth","node","getBoundingClientRect","width","tooltipContainer","dataset","on","exportChart","withSmallData","build","height","xAxisLabel","xAxisLabelOffset","yAxisLabel","yAxisLabelOffset","margin","top","right","bottom","left","show","update","hide","datum","data","call","nameLabel","redrawCharts","remove","subscribe","colorSchemas","constants","serializeWithStyles","encoder","window","btoa","encode","b64EncodeUnicode","str","encodeURIComponent","replace","match","p1","String","fromCharCode","config","styleClass","defaultFilename","chartBackground","imageSourceBase","titleFontSize","titleFontFamily","titleTopOffset","styleBackgroundString","d3svg","filename","title","img","createImage","convertSvgToHtml","onload","handleImageLoad","bind","createCanvas","addBackground","html","attr","serializer","initializeSerializer","formatHtmlByBrowser","prependTitle","parseInt","canvas","document","createElement","svgHtml","Image","src","drawImageOnCanvas","image","getContext","drawImage","downloadCanvas","extensionType","url","toDataURL","link","href","download","body","appendChild","click","removeChild","navigator","userAgent","search","lineGradientId","e","preventDefault","svgWidth","britechartsGreySchema","module","exports","defaultStylesByTagName","noStyleTags","tagNames","forEach","name","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","style","getDefaultStyleByTagName","toUpperCase","elem","cssTexts","elements","result","nodeType","Node","ELEMENT_NODE","console","error","querySelectorAll","el","i","cssText","cssPropName","outerHTML","map","d3Array","d3Ease","d3Format","d3Transition","valueLabel","mouseChaseDuration","ease","easeQuadInOut","tooltipBackground","backgroundBorderRadius","tooltipTextContainer","tooltipOffset","y","x","textSize","textLineHeight","valueTextSize","valueTextLineHeight","bodyFillColor","borderStrokeColor","titleFillColor","nameTextFillColor","valueTextFillColor","valueTextWeight","tooltipValueFormat","format","chartWidth","chartHeight","svg","_selection","each","_data","buildSVG","drawTooltip","buildContainerGroups","container","append","classed","transition","selectAll","getMaxLengthLine","texts","textSizes","filter","getBBox","max","getTooltipPosition","mouseX","mouseY","parentChartWidth","parentChartHeight","tooltipX","tooltipY","hasEnoughHorizontalRoom","hasEnoughVerticalRoom","positionX","positionY","hideTooltip","showTooltip","dataPoint","updateContent","value","lineHeight","valueLineHeight","defaultDy","temporalHeight","tooltipValue","tooltipName","tooltipTitle","text","updatePositionAndSize","mousePosition","parentChartSize","duration","updateTooltip","position","chartSize","_x","arguments","length","d3Axis","d3Dispatch","d3Scale","xScale","yScale","numOfVerticalTicks","xAxis","yAxis","xAxisPadding","yTickPadding","maskGridLines","baseLine","dispatcher","dispatch","yAxisTickFormat","getKey","key","getValue","cleanData","buildScales","buildAxis","drawGridLines","drawSteps","drawAxis","axisBottom","axisLeft","ticks","tickPadding","tickFormat","scaleBand","domain","rangeRound","paddingInner","scaleLinear","d","steps","enter","bandwidth","mouse","merge","exit","apply","_","jsonStepDataSmall","Klass","defaults","attributes","extend"],"mappings":";;;;;AAAA;;AAEA,KAAIA,cAAc,mBAAAC,CAAQ,CAAR,CAAlB;AAAA,KAEIC,SAAS,mBAAAD,CAAQ,CAAR,CAFb;AAAA,KAIIE,OAAO,mBAAAF,CAAQ,EAAR,CAJX;AAAA,KAKIG,cAAc,mBAAAH,CAAQ,EAAR,CALlB;AAAA,KAOII,cAAc,mBAAAJ,CAAQ,EAAR,CAPlB;;AAUA,UAASK,eAAT,GAA2B;AACvB,SAAIC,YAAYJ,MAAhB;AAAA,SACIK,UAAUJ,aADd;AAAA,SAEIK,cAAc,IAAIJ,YAAYK,eAAhB,EAFlB;AAAA,SAGIC,gBAAgBX,YAAYY,MAAZ,CAAmB,0BAAnB,CAHpB;AAAA,SAIIC,iBAAiBF,cAAcG,IAAd,KAAuBH,cAAcG,IAAd,GAAqBC,qBAArB,GAA6CC,KAApE,GAA4E,KAJjG;AAAA,SAKIC,gBALJ;AAAA,SAMIC,OANJ;;AAQA,SAAIL,cAAJ,EAAoB;AAChBb,qBAAYY,MAAZ,CAAmB,SAAnB,EAA8BO,EAA9B,CAAiC,OAAjC,EAA0C,YAAW;AACjDZ,uBAAUa,WAAV,CAAsB,eAAtB,EAAuC,wBAAvC;AACH,UAFD;;AAIAF,mBAAUT,YAAYY,aAAZ,GAA4BC,KAA5B,EAAV;;AAEAf,mBACKS,KADL,CACWH,cADX,EAEKU,MAFL,CAEY,GAFZ,EAGKC,UAHL,CAGgB,WAHhB,EAIKC,gBAJL,CAIsB,EAJtB,EAKKC,UALL,CAKgB,UALhB,EAMKC,gBANL,CAMsB,CAAC,EANvB,EAOKC,MAPL,CAOY;AACJC,kBAAK,EADD;AAEJC,oBAAO,EAFH;AAGJC,qBAAQ,EAHJ;AAIJC,mBAAM;AAJF,UAPZ,EAaKb,EAbL,CAaQ,iBAbR,EAa2BX,QAAQyB,IAbnC,EAcKd,EAdL,CAcQ,iBAdR,EAc2BX,QAAQ0B,MAdnC,EAeKf,EAfL,CAeQ,gBAfR,EAe0BX,QAAQ2B,IAflC;;AAkBAxB,uBAAcyB,KAAd,CAAoBlB,QAAQmB,IAA5B,EAAkCC,IAAlC,CAAuC/B,SAAvC;;AAEAC,iBAAQ+B,SAAR,CAAkB,KAAlB;;AAEAtB,4BAAmBjB,YAAYY,MAAZ,CAAmB,sDAAnB,CAAnB;AACAK,0BAAiBmB,KAAjB,CAAuB,EAAvB,EAA2BE,IAA3B,CAAgC9B,OAAhC;AACH;AACJ;;AAED;AACA,KAAIR,YAAYY,MAAZ,CAAmB,0BAAnB,EAA+CE,IAA/C,EAAJ,EAA0D;AACtDR;;AAEA;AACA;AACA,SAAIkC,eAAe,SAAfA,YAAe,GAAU;AACzBxC,qBAAYY,MAAZ,CAAmB,aAAnB,EAAkC6B,MAAlC;;AAEAnC;AACH,MAJD;;AAMA;AACAJ,YAAOwC,SAAP,CAAiB,QAAjB,EAA2BF,YAA3B;AACH,E;;;;;;;ACrED;AACA;AACA;AACA;AACA,uCAAsC;AACtC,EAAC,4BAA4B;;AAE7B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uDAAsD;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA0C,kFAAkF,EAAE;;AAE9H;AACA;AACA,2CAA0C,gCAAgC,6DAA6D,EAAE;AACzI;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,yCAAwC,+BAA+B,EAAE;;AAEzE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA0B,wBAAwB,EAAE;AACpD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,+CAA8C,cAAc;;AAE5D,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","file":"demo-step.js","sourcesContent":["'use strict';\n\nvar d3Selection = require('d3-selection'),\n\n    PubSub = require('pubsub-js'),\n\n    step = require('./../src/charts/step'),\n    miniTooltip = require('./../src/charts/mini-tooltip'),\n\n    dataBuilder = require('./../test/fixtures/stepChartDataBuilder');\n\n\nfunction createStepChart() {\n    var stepChart = step(),\n        tooltip = miniTooltip(),\n        testDataSet = new dataBuilder.StepDataBuilder(),\n        stepContainer = d3Selection.select('.js-step-chart-container'),\n        containerWidth = stepContainer.node() ? stepContainer.node().getBoundingClientRect().width : false,\n        tooltipContainer,\n        dataset;\n\n    if (containerWidth) {\n        d3Selection.select('#button').on('click', function() {\n            stepChart.exportChart('stepchart.png', 'Britecharts Step Chart');\n        });\n\n        dataset = testDataSet.withSmallData().build();\n\n        stepChart\n            .width(containerWidth)\n            .height(300)\n            .xAxisLabel('Meal Type')\n            .xAxisLabelOffset(45)\n            .yAxisLabel('Quantity')\n            .yAxisLabelOffset(-50)\n            .margin({\n                top: 40,\n                right: 40,\n                bottom: 50,\n                left: 80\n            })\n            .on('customMouseOver', tooltip.show)\n            .on('customMouseMove', tooltip.update)\n            .on('customMouseOut', tooltip.hide);\n\n\n        stepContainer.datum(dataset.data).call(stepChart);\n\n        tooltip.nameLabel('key');\n\n        tooltipContainer = d3Selection.select('.js-step-chart-container .step-chart .metadata-group');\n        tooltipContainer.datum([]).call(tooltip);\n    }\n}\n\n// Show charts if container available\nif (d3Selection.select('.js-step-chart-container').node()){\n    createStepChart();\n\n    // For getting a responsive behavior on our chart,\n    // we'll need to listen to the window resize event\n    var redrawCharts = function(){\n        d3Selection.select('.step-chart').remove();\n\n        createStepChart();\n    };\n\n    // Redraw charts on window resize\n    PubSub.subscribe('resize', redrawCharts);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo-step.js","// https://d3js.org/d3-axis/ Version 1.0.7. Copyright 2017 Mike Bostock.\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.d3 = global.d3 || {})));\n}(this, (function (exports) { 'use strict';\n\nvar slice = Array.prototype.slice;\n\nvar identity = function(x) {\n  return x;\n};\n\nvar top = 1;\nvar right = 2;\nvar bottom = 3;\nvar left = 4;\nvar epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + (x + 0.5) + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + (y + 0.5) + \")\";\n}\n\nfunction center(scale) {\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = range[0] + 0.5,\n        range1 = range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : identity)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"#000\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"#000\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d)); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nfunction axisTop(scale) {\n  return axis(top, scale);\n}\n\nfunction axisRight(scale) {\n  return axis(right, scale);\n}\n\nfunction axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nfunction axisLeft(scale) {\n  return axis(left, scale);\n}\n\nexports.axisTop = axisTop;\nexports.axisRight = axisRight;\nexports.axisBottom = axisBottom;\nexports.axisLeft = axisLeft;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.0.7@d3-axis/build/d3-axis.js\n// module id = 5\n// module chunks = 0 1 3 5 6","define(function(require) {\n    'use strict';\n\n    const {colorSchemas} = require('./colors.js');\n    const constants = require('./constants.js');\n    const serializeWithStyles = require('./serializeWithStyles.js');\n\n    let encoder = window.btoa;\n\n    if (!encoder) {\n        encoder = require('base-64').encode;\n    }\n\n    // Base64 doesn't work really well with Unicode strings, so we need to use this function\n    // Ref: https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n    const b64EncodeUnicode = (str) => {\n        return encoder(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {\n            return String.fromCharCode('0x' + p1);\n        }));\n    };\n\n    const config = {\n        styleClass : 'britechartStyle',\n        defaultFilename: 'britechart.png',\n        chartBackground: 'white',\n        imageSourceBase: 'data:image/svg+xml;base64,',\n        titleFontSize: '15px',\n        titleFontFamily: '\\'Benton Sans\\', sans-serif',\n        titleTopOffset: 30,\n        get styleBackgroundString () {\n            return `<style>svg{background:${this.chartBackground};}</style>`;\n        }\n    };\n\n    /**\n     * Main function to be used as a method by chart instances to export charts to png\n     * @param  {array} svgs         (or an svg element) pass in both chart & legend as array or just chart as svg or in array\n     * @param  {string} filename    [download to be called <filename>.png]\n     * @param  {string} title       Title for the image\n     */\n    function exportChart(d3svg, filename, title) {\n        let img = createImage(convertSvgToHtml.call(this, d3svg, title));\n\n        img.onload = handleImageLoad.bind(\n                img,\n                createCanvas(this.width(), this.height()),\n                filename\n            );\n    }\n\n    /**\n     * adds background styles to raw html\n     * @param {string} html raw html\n     */\n    function addBackground(html) {\n        return html.replace('>',`>${config.styleBackgroundString}`);\n    }\n\n    /**\n     * takes d3 svg el, adds proper svg tags, adds inline styles\n     * from stylesheets, adds white background and returns string\n     * @param  {object} d3svg TYPE d3 svg element\n     * @return {string} string of passed d3\n     */\n    function convertSvgToHtml (d3svg, title) {\n        if (!d3svg) {\n            return;\n        }\n\n        d3svg.attr('version', 1.1)\n            .attr('xmlns', 'http://www.w3.org/2000/svg');\n        let serializer = serializeWithStyles.initializeSerializer();\n        let html = serializer(d3svg.node());\n        html = formatHtmlByBrowser(html);\n        html = prependTitle.call(this, html, title, parseInt(d3svg.attr('width')));\n        html = addBackground(html);\n\n        return html;\n    }\n\n    /**\n     * Create Canvas\n     * @param  {number} width\n     * @param  {number} height\n     * @return {object} TYPE canvas element\n     */\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n\n        canvas.height = height;\n        canvas.width = width;\n\n        return canvas;\n    }\n\n    /**\n     * Create Image\n     * @param  {string} svgHtml string representation of svg el\n     * @return {object}  TYPE element <img>, src points at svg\n     */\n    function createImage(svgHtml) {\n        let img = new Image();\n\n        img.src = `${config.imageSourceBase}${ b64EncodeUnicode(svgHtml) }`;\n\n        return img;\n    };\n\n    /**\n     * Draws image on canvas\n     * @param  {object} image TYPE:el <img>, to be drawn\n     * @param  {object} canvas TYPE: el <canvas>, to draw on\n     */\n    function drawImageOnCanvas(image, canvas) {\n        canvas.getContext('2d').drawImage(image, 0, 0);\n\n        return canvas;\n    }\n\n    /**\n     * Triggers browser to download image, convert canvas to url,\n     * we need to append the link el to the dom before clicking it for Firefox to register\n     * point <a> at it and trigger click\n     * @param  {object} canvas TYPE: el <canvas>\n     * @param  {string} filename\n     * @param  {string} extensionType\n     */\n    function downloadCanvas(canvas, filename=config.defaultFilename, extensionType='image/png') {\n        let url = canvas.toDataURL(extensionType);\n        let link = document.createElement('a');\n\n        link.href = url;\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    }\n\n    /**\n     * Some browsers need special formatting, we handle that here\n     * @param  {string} html string of svg html\n     * @return {string} string of svg html\n     */\n    function formatHtmlByBrowser(html) {\n        if (navigator.userAgent.search('FireFox') > -1) {\n            return html.replace(/url.*&quot;\\)/, `url(&quot;#${constants.lineGradientId}&quot;);`);\n        }\n\n        return html;\n    }\n\n    /**\n     * Handles on load event fired by img.onload, this=img\n     * @param  {object} canvas TYPE: el <canvas>\n     * @param  {string} filename\n     * @param  {object} e\n     */\n    function handleImageLoad(canvas, filename, e) {\n        e.preventDefault();\n\n        downloadCanvas(drawImageOnCanvas(this, canvas), filename);\n    }\n\n    /**\n     * if passed, append title to the raw html to appear on graph\n     * @param  {string} html     raw html string\n     * @param  {string} title    title of the graph\n     * @param  {number} svgWidth width of graph container\n     * @return {string}         raw html with title prepended\n     */\n    function prependTitle(html, title, svgWidth) {\n        if (!title || !svgWidth) {\n            return html;\n        }\n        let {britechartsGreySchema} = colorSchemas;\n        html =  html.replace(/<g/,`<text x=\"${this.margin().left}\" y=\"${config.titleTopOffset}\" font-family=\"${config.titleFontFamily}\" font-size=\"${config.titleFontSize}\" fill=\"${britechartsGreySchema[6]}\"> ${title} </text><g `);\n\n        return html;\n    }\n\n    return {\n        exportChart,\n        convertSvgToHtml,\n        createImage,\n        drawImageOnCanvas\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/exportChart.js","module.exports = (function() {\n\n    'use strict';\n\n    return {\n\n        /**\n         * returns serializer function, only run it when you know you want to serialize your chart\n         * @return {func} serializer to add styles in line to dom string\n         */\n        initializeSerializer() {\n\n            // Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\n            const defaultStylesByTagName = {};\n\n            // Styles inherited from style sheets will not be rendered for elements with these tag names\n            const noStyleTags = {'BASE':true,'HEAD':true,'HTML':true,'META':true,'NOFRAME':true,'NOSCRIPT':true,'PARAM':true,'SCRIPT':true,'STYLE':true,'TITLE':true};\n\n            // This list determines which css default values lookup tables are precomputed at load time\n            // Lookup tables for other tag names will be automatically built at runtime if needed\n            const tagNames = ['A','ABBR','ADDRESS','AREA','ARTICLE','ASIDE','AUDIO','B','BASE','BDI','BDO','BLOCKQUOTE','BODY','BR','BUTTON','CANVAS','CAPTION','CENTER','CITE','CODE','COL','COLGROUP','COMMAND','DATALIST','DD','DEL','DETAILS','DFN','DIV','DL','DT','EM','EMBED','FIELDSET','FIGCAPTION','FIGURE','FONT','FOOTER','FORM','H1','H2','H3','H4','H5','H6','HEAD','HEADER','HGROUP','HR','HTML','I','IFRAME','IMG','INPUT','INS','KBD','LABEL','LEGEND','LI','LINK','MAP','MARK','MATH','MENU','META','METER','NAV','NOBR','NOSCRIPT','OBJECT','OL','OPTION','OPTGROUP','OUTPUT','P','PARAM','PRE','PROGRESS','Q','RP','RT','RUBY','S','SAMP','SCRIPT','SECTION','SELECT','SMALL','SOURCE','SPAN','STRONG','STYLE','SUB','SUMMARY','SUP','SVG','TABLE','TBODY','TD','TEXTAREA','TFOOT','TH','THEAD','TIME','TITLE','TR','TRACK','U','UL','VAR','VIDEO','WBR'];\n\n            // Precompute the lookup tables.\n            [].forEach.call(tagNames, (name) => {\n                if (!noStyleTags[name]) {\n                    defaultStylesByTagName[name] = computeDefaultStyleByTagName(name);\n                }\n            });\n\n            function computeDefaultStyleByTagName(tagName) {\n                let defaultStyle = {},\n                    element = document.body.appendChild(document.createElement(tagName)),\n                    computedStyle = window.getComputedStyle(element);\n\n                [].forEach.call(computedStyle, (style) => {\n                    defaultStyle[style] = computedStyle[style];\n                });\n                document.body.removeChild(element);\n                return defaultStyle;\n            }\n\n            function getDefaultStyleByTagName (tagName) {\n                tagName = tagName.toUpperCase();\n                if (!defaultStylesByTagName[tagName]) {\n                    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n                }\n                return defaultStylesByTagName[tagName];\n            };\n\n            function serializeWithStyles(elem) {\n\n                let cssTexts = [],\n                    elements,\n                    computedStyle,\n                    defaultStyle,\n                    result;\n\n                if (!elem || elem.nodeType !== Node.ELEMENT_NODE) {\n                    console.error('Error: Object passed in to serializeWithSyles not of nodeType Node.ELEMENT_NODE');\n                    return;\n                }\n\n                cssTexts = [];\n                elements = elem.querySelectorAll('*');\n\n                [].forEach.call(elements, (el, i) => {\n                    if (!noStyleTags[el.tagName]) {\n                        computedStyle = window.getComputedStyle(el);\n                        defaultStyle = getDefaultStyleByTagName(el.tagName);\n                        cssTexts[i] = el.style.cssText;\n                        [].forEach.call(computedStyle, (cssPropName) => {\n                            if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n                                el.style[cssPropName] = computedStyle[cssPropName];\n                            }\n                        });\n                    }\n                });\n\n                result = elem.outerHTML;\n                elements = [].map.call(elements, (el, i) => {\n                    el.style.cssText = cssTexts[i];\n                    return el;\n                });\n\n                return result;\n\n            };\n\n            return serializeWithStyles;\n        }\n    }\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/serializeWithStyles.js","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.1.0@base-64/base64.js\n// module id = 22\n// module chunks = 0 2 3 4 5 6","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 23\n// module chunks = 0 2 3 4 5 6","define(function(require){\n    'use strict';\n\n    const d3Array = require('d3-array');\n    const d3Ease = require('d3-ease');\n    const d3Format = require('d3-format');\n    const d3Selection = require('d3-selection');\n    const d3Transition = require('d3-transition');\n\n\n    /**\n     * Mini Tooltip Component reusable API class that renders a\n     * simple and configurable tooltip element for Britechart's\n     * bar and step chart.\n     *\n     * @module Mini-tooltip\n     * @tutorial bar\n     * @requires d3\n     *\n     * @example\n     * var barChart = line(),\n     *     miniTooltip = miniTooltip();\n     *\n     * barChart\n     *     .width(500)\n     *     .height(300)\n     *     .on('customMouseHover', miniTooltip.show)\n     *     .on('customMouseMove', miniTooltip.update)\n     *     .on('customMouseOut', miniTooltip.hide);\n     *\n     * d3Selection.select('.css-selector')\n     *     .datum(dataset)\n     *     .call(barChart);\n     *\n     * d3Selection.select('.metadata-group .mini-tooltip-container')\n     *     .datum([])\n     *     .call(miniTooltip);\n     *\n     */\n    return function module() {\n\n        let margin = {\n                top: 12,\n                right: 12,\n                bottom: 12,\n                left: 12\n            },\n            width = 100,\n            height = 100,\n\n            // Optional Title\n            title = '',\n\n            // Data Format\n            valueLabel = 'value',\n            nameLabel = 'name',\n\n            // Animations\n            mouseChaseDuration = 100,\n            ease = d3Ease.easeQuadInOut,\n\n            // tooltip\n            tooltipBackground,\n            backgroundBorderRadius = 1,\n            tooltipTextContainer,\n            tooltipOffset = {\n                y: 0,\n                x: 20\n            },\n\n            // Fonts\n            textSize = 14,\n            textLineHeight = 1.5,\n            valueTextSize = 27,\n            valueTextLineHeight = 1.18,\n\n            // Colors\n            bodyFillColor = '#FFFFFF',\n            borderStrokeColor = '#D2D6DF',\n            titleFillColor = '#666a73',\n            nameTextFillColor = '#666a73',\n            valueTextFillColor = '#45494E',\n            valueTextWeight = 200,\n\n            // formats\n            tooltipValueFormat = d3Format.format('.2f'),\n\n            chartWidth,\n            chartHeight,\n            svg;\n\n\n        /**\n         * This function creates the graph using the selection as container\n         * @param {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         * @param {Array} _data The data to attach and generate the chart (usually an empty array)\n         */\n        function exports(_selection) {\n            _selection.each(function(_data){\n                chartWidth = width - margin.left - margin.right;\n                chartHeight = height - margin.top - margin.bottom;\n\n                buildSVG(this);\n                drawTooltip();\n            });\n        }\n\n        /**\n         * Builds containers for the tooltip\n         * Also applies the Margin convention\n         * @private\n         */\n        function buildContainerGroups() {\n            let container = svg\n              .append('g')\n                .classed('tooltip-container-group', true)\n                .attr('transform', `translate( ${margin.left}, ${margin.top})`);\n\n            container.append('g').classed('tooltip-group', true);\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container) {\n            if (!svg) {\n                svg = d3Selection.select(container)\n                    .append('g')\n                    .classed('britechart britechart-mini-tooltip', true);\n\n                buildContainerGroups();\n            }\n            svg\n                .transition()\n                .attr('width', width)\n                .attr('height', height);\n\n            // Hidden by default\n            exports.hide();\n        }\n\n        /**\n         * Draws the different elements of the Tooltip box\n         * @return void\n         */\n        function drawTooltip(){\n            tooltipTextContainer = svg.selectAll('.tooltip-group')\n                .append('g')\n                .classed('tooltip-text', true);\n\n            tooltipBackground = tooltipTextContainer\n              .append('rect')\n                .classed('tooltip-background', true)\n                .attr('width', width)\n                .attr('height', height)\n                .attr('rx', backgroundBorderRadius)\n                .attr('ry', backgroundBorderRadius)\n                .attr('y', - margin.top)\n                .attr('x', - margin.left)\n                .style('fill', bodyFillColor)\n                .style('stroke', borderStrokeColor)\n                .style('stroke-width', 1)\n                .style('pointer-events', 'none')\n                .style('opacity', 0.9);\n        }\n\n        /**\n         * Figures out the max length of the tooltip lines\n         * @param  {D3Selection[]} texts    List of svg elements of each line\n         * @return {Number}                 Max size of the lines\n         */\n        function getMaxLengthLine(...texts) {\n            let textSizes = texts.filter(x => !!x)\n                .map(x => x.node().getBBox().width);\n\n            return d3Array.max(textSizes);\n        }\n\n        /**\n         * Calculates the desired position for the tooltip\n         * @param  {Number} mouseX             Current horizontal mouse position\n         * @param  {Number} mouseY             Current vertical mouse position\n         * @param  {Number} parentChartWidth   Parent's chart width\n         * @param  {Number} parentChartHeight  Parent's chart height\n         * @return {Number[]}                  X and Y position\n         * @private\n         */\n        function getTooltipPosition([mouseX, mouseY], [parentChartWidth, parentChartHeight]) {\n            let tooltipX, tooltipY;\n\n            if (hasEnoughHorizontalRoom(parentChartWidth, mouseX)) {\n                tooltipX = mouseX + tooltipOffset.x;\n            } else {\n                tooltipX = mouseX - chartWidth - tooltipOffset.x - margin.right;\n            }\n\n            if (hasEnoughVerticalRoom(parentChartHeight, mouseY)) {\n                tooltipY = mouseY + tooltipOffset.y;\n            } else {\n                tooltipY = mouseY - chartHeight - tooltipOffset.y - margin.bottom;\n            }\n\n            return [tooltipX, tooltipY];\n        }\n\n        /**\n         * Checks if the mouse is over the bounds of the parent chart\n         * @param  {Number}  chartWidth Parent's chart\n         * @param  {Number}  positionX  Mouse position\n         * @return {Boolean}            If the mouse position allows space for the tooltip\n         */\n        function hasEnoughHorizontalRoom(parentChartWidth, positionX) {\n            return (parentChartWidth - margin.left - margin.right - chartWidth) - positionX > 0;\n        }\n\n        /**\n         * Checks if the mouse is over the bounds of the parent chart\n         * @param  {Number}  chartWidth Parent's chart\n         * @param  {Number}  positionX  Mouse position\n         * @return {Boolean}            If the mouse position allows space for the tooltip\n         */\n        function hasEnoughVerticalRoom(parentChartHeight, positionY) {\n            return (parentChartHeight - margin.top - margin.bottom - chartHeight) - positionY > 0;\n        }\n\n        /**\n         * Hides the tooltip\n         * @return {void}\n         */\n        function hideTooltip() {\n            svg.style('display', 'none');\n        }\n\n        /**\n         * Shows the tooltip updating it's content\n         * @param  {Object} dataPoint Data point from the chart\n         * @return {void}\n         */\n        function showTooltip(dataPoint) {\n            updateContent(dataPoint);\n            svg.style('display', 'block');\n        }\n\n        /**\n         * Draws the data entries inside the tooltip for a given topic\n         * @param  {Object} topic Topic to extract data from\n         * @return void\n         */\n        function updateContent(dataPoint = {}){\n            let value = dataPoint[valueLabel] || '',\n                name = dataPoint[nameLabel] || '',\n                lineHeight = textSize * textLineHeight,\n                valueLineHeight = valueTextSize * valueTextLineHeight,\n                defaultDy = '1em',\n                temporalHeight = 0,\n                tooltipValue,\n                tooltipName,\n                tooltipTitle;\n\n            tooltipTextContainer.selectAll('text')\n                .remove();\n\n            if (title) {\n                tooltipTitle = tooltipTextContainer\n                  .append('text')\n                    .classed('mini-tooltip-title', true)\n                    .attr('dy', defaultDy)\n                    .attr('y', 0)\n                    .style('fill', titleFillColor)\n                    .style('font-size', textSize)\n                    .text(title);\n\n                temporalHeight = lineHeight + temporalHeight;\n            }\n\n            if (name) {\n                tooltipName = tooltipTextContainer\n                  .append('text')\n                    .classed('mini-tooltip-name', true)\n                    .attr('dy', defaultDy)\n                    .attr('y', temporalHeight || 0)\n                    .style('fill', nameTextFillColor)\n                    .style('font-size', textSize)\n                    .text(name);\n\n                temporalHeight = lineHeight + temporalHeight;\n            }\n\n            if (value) {\n                tooltipValue = tooltipTextContainer\n                  .append('text')\n                    .classed('mini-tooltip-value', true)\n                    .attr('dy', defaultDy)\n                    .attr('y', temporalHeight || 0)\n                    .style('fill', valueTextFillColor)\n                    .style('font-size', valueTextSize)\n                    .style('font-weight', valueTextWeight)\n                    .text(tooltipValueFormat(value));\n\n                temporalHeight = valueLineHeight + temporalHeight;\n            }\n\n            chartWidth = getMaxLengthLine(tooltipName, tooltipTitle, tooltipValue);\n            chartHeight = temporalHeight;\n        }\n\n        /**\n         * Updates size and position of tooltip depending on the side of the chart we are in\n         * @param  {Object} dataPoint DataPoint of the tooltip\n         * @return void\n         */\n        function updatePositionAndSize(mousePosition, parentChartSize) {\n            let [tooltipX, tooltipY] = getTooltipPosition(mousePosition, parentChartSize);\n\n            svg.transition()\n                .duration(mouseChaseDuration)\n                .ease(ease)\n                .attr('height', chartHeight + margin.top + margin.bottom)\n                .attr('width', chartWidth + margin.left + margin.right)\n                .attr('transform', `translate(${tooltipX},${tooltipY})`);\n\n            tooltipBackground\n                .attr('height', chartHeight + margin.top + margin.bottom)\n                .attr('width', chartWidth + margin.left + margin.right);\n        }\n\n        /**\n         * Updates tooltip content, size and position\n         *\n         * @param  {Object} dataPoint Current datapoint to show info about\n         * @return void\n         */\n        function updateTooltip(dataPoint, position, chartSize) {\n            updateContent(dataPoint);\n            updatePositionAndSize(position, chartSize);\n        }\n\n        /**\n         * Hides the tooltip\n         * @return {Module} Tooltip module to chain calls\n         * @public\n         */\n        exports.hide = function() {\n            hideTooltip();\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets data's nameLabel\n         * @param  {text} _x Desired nameLabel\n         * @return { text | module} nameLabel or Step Chart module to chain calls\n         * @public\n         */\n        exports.nameLabel = function(_x) {\n            if (!arguments.length) {\n                return nameLabel;\n            }\n            nameLabel = _x;\n            return this;\n        };\n\n        /**\n         * Shows the tooltip\n         * @return {Module} Tooltip module to chain calls\n         * @public\n         */\n        exports.show = function() {\n            showTooltip();\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the title of the tooltip\n         * @param  {string} _x Desired title\n         * @return { string | module} Current title or module to chain calls\n         * @public\n         */\n        exports.title = function(_x) {\n            if (!arguments.length) {\n                return title;\n            }\n            title = _x;\n            return this;\n        };\n\n        /**\n         * Updates the position and content of the tooltip\n         * @param  {Object} dataPoint       Datapoint of the hovered element\n         * @param  {Array} mousePosition    Mouse position relative to the parent chart [x, y]\n         * @param  {Array} chartSize        Parent chart size [x, y]\n         * @return {module}                 Current component\n         */\n        exports.update = function(dataPoint, mousePosition, chartSize) {\n            updateTooltip(dataPoint, mousePosition, chartSize);\n\n            return this;\n        };\n\n        return exports;\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/mini-tooltip.js","define(function(require) {\n    'use strict';\n\n    const d3Array = require('d3-array');\n    const d3Axis = require('d3-axis');\n    const d3Dispatch = require('d3-dispatch');\n    const d3Ease = require('d3-ease');\n    const d3Format = require('d3-format');\n    const d3Scale = require('d3-scale');\n    const d3Selection = require('d3-selection');\n    const d3Transition = require('d3-transition');\n\n    const {exportChart} = require('./helpers/exportChart');\n\n\n    /**\n     * @typedef StepChartData\n     * @type Object[]\n     *\n     * @property {String} key      Key we measure (required)\n     * @property {Number} value    value of the key (required)\n     *\n     * @example\n     * [\n     *     {\n     *         value: 1,\n     *         key: 'glittering'\n     *     },\n     *     {\n     *         value: 1,\n     *         key: 'luminous'\n     *     }\n     * ]\n     */\n\n    /**\n     * Step Chart reusable API class that renders a\n     * simple and configurable step chart.\n     *\n     * @module Step\n     * @tutorial step\n     * @requires d3-array, d3-axis, d3-dispatch, d3-format, d3-scale, d3-selection, d3-transition\n     *\n     * @example\n     * var stepChart= step();\n     *\n     * stepChart\n     *     .height(500)\n     *     .width(800);\n     *\n     * d3Selection.select('.css-selector')\n     *     .datum(dataset)\n     *     .call(stepChart);\n     *\n     */\n\n    return function module() {\n\n        let margin = {\n                top: 20,\n                right: 20,\n                bottom: 30,\n                left: 40\n            },\n            width = 960,\n            height = 500,\n            ease = d3Ease.easeQuadInOut,\n            data,\n            chartWidth, chartHeight,\n            xScale, yScale,\n            numOfVerticalTicks = 6,\n            xAxis, xAxisLabel,\n            yAxis, yAxisLabel,\n            xAxisLabelOffset = 45,\n            yAxisLabelOffset = -20,\n            xAxisPadding = {\n                top: 0,\n                left: 0,\n                bottom: 0,\n                right: 0\n            },\n            yTickPadding = 8,\n            svg,\n\n            valueLabel = 'value',\n            nameLabel = 'key',\n\n            maskGridLines,\n            baseLine,\n\n            // Dispatcher object to broadcast the mouse events\n            // Ref: https://github.com/mbostock/d3/wiki/Internals#d3_dispatch\n            dispatcher = d3Dispatch.dispatch('customMouseOver', 'customMouseOut', 'customMouseMove'),\n\n            // Formats\n            yAxisTickFormat = d3Format.format('.3'),\n\n            // extractors\n            getKey = ({key}) => key,\n            getValue = ({value}) => value;\n\n\n        /**\n         * This function creates the graph using the selection as container\n         * @param  {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         * @param {StepChartData} _data The data to attach and generate the chart\n         */\n        function exports(_selection){\n            _selection.each(function(_data){\n                // Make space on the left of the graph for the y axis label\n                chartWidth = width - margin.left - margin.right;\n                chartHeight = height - margin.top - margin.bottom;\n                data = cleanData(_data);\n\n                buildScales();\n                buildAxis();\n                buildSVG(this);\n                drawGridLines();\n                drawSteps();\n                drawAxis();\n            });\n        }\n\n        /**\n         * Creates the d3 x and y axis, setting orientations\n         * @private\n         */\n        function buildAxis(){\n            xAxis = d3Axis.axisBottom(xScale);\n\n            yAxis = d3Axis.axisLeft(yScale)\n                .ticks(numOfVerticalTicks)\n                .tickPadding(yTickPadding)\n                .tickFormat(yAxisTickFormat);\n        }\n\n        /**\n         * Builds containers for the chart, the axis and a wrapper for all of them\n         * Also applies the Margin convention\n         * @private\n         */\n        function buildContainerGroups(){\n            let container = svg\n              .append('g')\n                .classed('container-group', true)\n                .attr('transform', `translate(${margin.left}, ${margin.top})`);\n\n            container\n              .append('g')\n                .classed('grid-lines-group', true);\n            container\n              .append('g')\n                .classed('chart-group', true);\n            container\n              .append('g')\n                .classed('x-axis-group axis', true)\n              .append('g')\n                .classed('x-axis-label', true);\n            container\n              .append('g')\n                .classed('y-axis-group axis', true)\n              .append('g')\n                .classed('y-axis-label', true);\n            container\n                .append('g').classed('metadata-group', true);\n        }\n\n        /**\n         * Creates the x and y scales of the graph\n         * @private\n         */\n        function buildScales(){\n            xScale = d3Scale.scaleBand()\n                .domain(data.map(getKey))\n                .rangeRound([0, chartWidth])\n                .paddingInner(0);\n\n            yScale = d3Scale.scaleLinear()\n                .domain([0, d3Array.max(data, getValue)])\n                .rangeRound([chartHeight, 0]);\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container){\n            if (!svg) {\n                svg = d3Selection.select(container)\n                  .append('svg')\n                    .classed('britechart step-chart', true);\n\n                buildContainerGroups();\n            }\n\n            svg\n                .attr('width', width)\n                .attr('height', height);\n        }\n\n        /**\n         * Cleaning data adding the proper format\n         * @param  {StepChartData} data Data\n         * @private\n         */\n        function cleanData(data) {\n            return data.map((d) => {\n                d.value = +d[valueLabel];\n                d.key = String(d[nameLabel]);\n\n                return d;\n            });\n        }\n\n        /**\n         * Draws the x and y axis on the svg object within their\n         * respective groups\n         * @private\n         */\n        function drawAxis(){\n            svg.select('.x-axis-group.axis')\n                .attr('transform', `translate(0, ${chartHeight})`)\n                .call(xAxis);\n\n            if (xAxisLabel) {\n                svg.select('.x-axis-label')\n                  .append('text')\n                    .attr('text-anchor', 'middle')\n                    .attr('x', chartWidth / 2)\n                    .attr('y', xAxisLabelOffset)\n                    .text(xAxisLabel);\n            }\n\n            svg.select('.y-axis-group.axis')\n                .call(yAxis);\n\n            if (yAxisLabel) {\n                svg.select('.y-axis-label')\n                  .append('text')\n                    .attr('x', -chartHeight / 2)\n                    .attr('y', yAxisLabelOffset)\n                    .attr('text-anchor', 'middle')\n                    .attr('transform', 'rotate(270 0 0)')\n                    .text(yAxisLabel);\n            }\n        }\n\n        /**\n         * Draws the step elements within the chart group\n         * @private\n         */\n        function drawSteps(){\n            let steps = svg.select('.chart-group').selectAll('.step').data(data);\n\n            // Enter\n            steps.enter()\n              .append('rect')\n                .classed('step', true)\n                .attr('x', chartWidth) // Initially drawing the steps at the end of Y axis\n                .attr('y', ({value}) => yScale(value))\n                .attr('width', xScale.bandwidth())\n                .attr('height', (d) => (chartHeight - yScale(d.value)))\n                .on('mouseover', function() {\n                    dispatcher.call('customMouseOver', this);\n                })\n                .on('mousemove', function(d) {\n                    dispatcher.call('customMouseMove', this, d, d3Selection.mouse(this), [chartWidth, chartHeight]);\n                })\n                .on('mouseout', function() {\n                    dispatcher.call('customMouseOut', this);\n                })\n              .merge(steps)\n                .transition()\n                .ease(ease)\n                .attr('x', ({key}) => xScale(key))\n                .attr('y', function(d) {\n                    return yScale(d.value);\n                })\n                .attr('width', xScale.bandwidth())\n                .attr('height', function(d) {\n                    return chartHeight - yScale(d.value);\n                });\n\n            // Exit\n            steps.exit()\n                .transition()\n                .style('opacity', 0)\n                .remove();\n        }\n\n        /**\n         * Draws grid lines on the background of the chart\n         * @return void\n         */\n        function drawGridLines(){\n            maskGridLines = svg.select('.grid-lines-group')\n                .selectAll('line.horizontal-grid-line')\n                .data(yScale.ticks(numOfVerticalTicks))\n                .enter()\n                  .append('line')\n                    .attr('class', 'horizontal-grid-line')\n                    .attr('x1', (xAxisPadding.left))\n                    .attr('x2', chartWidth)\n                    .attr('y1', (d) => yScale(d))\n                    .attr('y2', (d) => yScale(d));\n\n            //draw a horizontal line to extend x-axis till the edges\n            baseLine = svg.select('.grid-lines-group')\n                .selectAll('line.extended-x-line')\n                .data([0])\n                .enter()\n                  .append('line')\n                    .attr('class', 'extended-x-line')\n                    .attr('x1', (xAxisPadding.left))\n                    .attr('x2', chartWidth)\n                    .attr('y1', height - margin.bottom - margin.top)\n                    .attr('y2', height - margin.bottom - margin.top);\n        }\n\n        /**\n         * Chart exported to png and a download action is fired\n         * @public\n         */\n        exports.exportChart = function(filename) {\n            exportChart.call(exports, svg, filename);\n        };\n\n        /**\n         * Gets or Sets the margin of the chart\n         * @param  {object} _x Margin object to get/set\n         * @return { margin | module} Current margin or Step Chart module to chain calls\n         * @public\n         */\n        exports.margin = function(_x) {\n            if (!arguments.length) {\n                return margin;\n            }\n            margin = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the width of the chart\n         * @param  {number} _x Desired width for the graph\n         * @return { width | module} Current width or step Chart module to chain calls\n         * @public\n         */\n        exports.width = function(_x) {\n            if (!arguments.length) {\n                return width;\n            }\n            width = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the height of the chart\n         * @param  {number} _x Desired width for the graph\n         * @return { height | module} Current height or Step Chart module to chain calls\n         * @public\n         */\n        exports.height = function(_x) {\n            if (!arguments.length) {\n                return height;\n            }\n            height = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the number of vertical ticks on the chart\n         * @param  {number} _x Desired width for the graph\n         * @return { height | module} Current height or Step Chart module to chain calls\n         * @public\n         */\n        exports.numOfVerticalTicks = function(_x) {\n            if (!arguments.length) {\n                return numOfVerticalTicks;\n            }\n            numOfVerticalTicks = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the text of the xAxisLabel on the chart\n         * @param  {text} _x Desired text for the label\n         * @return { text | module} label or Step Chart module to chain calls\n         * @public\n         */\n        exports.xAxisLabel = function(_x) {\n            if (!arguments.length) {\n                return xAxisLabel;\n            }\n            xAxisLabel = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the offset of the xAxisLabel on the chart\n         * @param  {integer} _x Desired offset for the label\n         * @return { integer | module} label or Step Chart module to chain calls\n         * @public\n         */\n        exports.xAxisLabelOffset = function(_x) {\n            if (!arguments.length) {\n                return xAxisLabelOffset;\n            }\n            xAxisLabelOffset = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the text of the yAxisLabel on the chart\n         * @param  {text} _x Desired text for the label\n         * @return { text | module} label or Step Chart module to chain calls\n         * @public\n         */\n        exports.yAxisLabel = function(_x) {\n            if (!arguments.length) {\n                return yAxisLabel;\n            }\n            yAxisLabel = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the offset of the yAxisLabel on the chart\n         * @param  {integer} _x Desired offset for the label\n         * @return { integer | module} label or Step Chart module to chain calls\n         * @public\n         */\n        exports.yAxisLabelOffset = function(_x) {\n            if (!arguments.length) {\n                return yAxisLabelOffset;\n            }\n            yAxisLabelOffset = _x;\n            return this;\n        };\n\n        /**\n         * Exposes an 'on' method that acts as a bridge with the event dispatcher\n         * We are going to expose this events:\n         * customMouseOver, customMouseMove and customMouseOut\n         *\n         * @return {module} Bar Chart\n         * @public\n         */\n        exports.on = function() {\n            let value = dispatcher.on.apply(dispatcher, arguments);\n\n            return value === dispatcher ? exports : value;\n        };\n\n        /**\n         * Chart exported to png and a download action is fired\n         * @public\n         */\n        exports.exportChart = function(filename, title) {\n            exportChart.call(exports, svg, filename, title);\n        };\n\n        return exports;\n    };\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/step.js","define(function(require) {\n    'use strict';\n\n    var _ = require('underscore'),\n\n        jsonStepDataSmall = require('json!../json/stepDataSmall.json');\n\n    function StepDataBuilder(config){\n        this.Klass = StepDataBuilder;\n\n        this.config = _.defaults({}, config);\n\n        this.withSmallData = function() {\n            var attributes = _.extend({}, this.config, jsonStepDataSmall);\n\n            return new this.Klass(attributes);\n        }\n\n\n        this.build = function() {\n            return this.config;\n        };\n    }\n\n    return {\n        StepDataBuilder: StepDataBuilder\n    };\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/fixtures/stepChartDataBuilder.js","module.exports = {\n\t\"data\": [\n\t\t{\n\t\t\t\"key\": \"Appetizer\",\n\t\t\t\"value\": 400\n\t\t},\n\t\t{\n\t\t\t\"key\": \"Soup\",\n\t\t\t\"value\": 300\n\t\t},\n\t\t{\n\t\t\t\"key\": \"Salad\",\n\t\t\t\"value\": 300\n\t\t},\n\t\t{\n\t\t\t\"key\": \"Lunch\",\n\t\t\t\"value\": 250\n\t\t},\n\t\t{\n\t\t\t\"key\": \"Dinner\",\n\t\t\t\"value\": 220\n\t\t},\n\t\t{\n\t\t\t\"key\": \"Dessert\",\n\t\t\t\"value\": 100\n\t\t},\n\t\t{\n\t\t\t\"key\": \"Midnight snack\",\n\t\t\t\"value\": 20\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.5.4@json-loader!./test/json/stepDataSmall.json\n// module id = 67\n// module chunks = 6"],"sourceRoot":""}