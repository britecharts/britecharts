{"version":3,"sources":["webpack:///./demos/demo-bar.js","webpack:///./src/charts/bar.js","webpack:///./~/.1.0.7@d3-axis/build/d3-axis.js","webpack:///./src/charts/helpers/text.js","webpack:///./src/charts/helpers/exportChart.js","webpack:///./src/charts/helpers/serializeWithStyles.js","webpack:///./~/.0.1.0@base-64/base64.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/charts/mini-tooltip.js","webpack:///./test/fixtures/barChartDataBuilder.js","webpack:///./test/json/barColors.json","webpack:///./test/json/barDataLetters.json"],"names":["d3Selection","require","PubSub","bar","miniTooltip","colors","dataBuilder","createBarChart","barChart","testDataSet","BarDataBuilder","barContainer","select","containerWidth","node","getBoundingClientRect","width","dataset","withLettersFrequency","build","height","datum","call","createHorizontalBarChart","tooltip","tooltipContainer","withColors","margin","left","right","top","bottom","horizontal","colorSchema","colorSchemas","britechartsColorSchema","yAxisPaddingBetweenChart","percentageAxisToMaxRatio","on","show","update","hide","createBarChartWithTooltip","exportChart","usePercentage","redrawCharts","selectAll","remove","subscribe","d3Array","d3Axis","d3Color","d3Dispatch","d3Format","d3Scale","d3Transition","textHelper","colorHelper","PERCENTAGE_FORMAT","NUMBER_FORMAT","module","data","chartWidth","chartHeight","xScale","yScale","singleColors","aloeGreen","colorList","colorMap","numOfVerticalTicks","numOfHorizontalTicks","enablePercentageLabels","percentageLabelMargin","percentageLabelSize","horizontalLabelFormat","verticalLabelFormat","valueLabelFormat","xAxis","yAxis","xAxisPadding","yAxisLineWrapLimit","svg","valueLabel","nameLabel","maskGridLines","baseLine","dispatcher","dispatch","getName","name","getValue","value","_percentageLabelHorizontalX","_percentageLabelHorizontalY","bandwidth","_percentageLabelVerticalX","_percentageLabelVerticalY","_percentageLabelHorizontalFormatValue","format","_percentageLabelVerticalFormatValue","parseFloat","exports","_selection","each","_data","cleanData","buildScales","buildAxis","buildSVG","drawGridLines","drawBars","drawAxis","drawPercentageLabels","axisBottom","axisLeft","ticks","tickSizeInner","buildContainerGroups","container","append","classed","attr","percentageAxis","Math","min","max","scaleBand","domain","map","rangeRound","padding","scaleLinear","d","reverse","i","color","length","item","filter","String","wrapText","text","wrapTextWithEllipses","drawHorizontalBars","bars","enter","darker","mouse","merge","drawVerticalBars","labelXPosition","labelYPosition","percentageLabels","exit","transition","style","drawVerticalGridLines","drawHorizontalGridLines","filename","_x","arguments","apply","title","wrapConfig","lineHeight","smallTextOffset","smallTextLineHeightRatio","smallTextRatio","valueClassName","labelClassName","defaultTextSize","defaultFontFace","xOffset","fontSize","availableWidth","words","split","word","line","lineNumber","smallLineHeight","y","dy","smallFontSize","tspan","pop","push","join","getComputedTextLength","xpos","limit","getTextWidth","fontFace","a","document","createElement","b","getContext","font","measureText","constants","serializeWithStyles","encoder","window","btoa","encode","b64EncodeUnicode","str","encodeURIComponent","replace","match","p1","fromCharCode","config","styleClass","defaultFilename","chartBackground","imageSourceBase","titleFontSize","titleFontFamily","titleTopOffset","styleBackgroundString","d3svg","img","createImage","convertSvgToHtml","onload","handleImageLoad","bind","createCanvas","addBackground","html","serializer","initializeSerializer","formatHtmlByBrowser","prependTitle","parseInt","canvas","svgHtml","Image","src","drawImageOnCanvas","image","drawImage","downloadCanvas","extensionType","url","toDataURL","link","href","download","body","appendChild","click","removeChild","navigator","userAgent","search","lineGradientId","e","preventDefault","svgWidth","britechartsGreySchema","defaultStylesByTagName","noStyleTags","tagNames","forEach","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","getDefaultStyleByTagName","toUpperCase","elem","cssTexts","elements","result","nodeType","Node","ELEMENT_NODE","console","error","querySelectorAll","el","cssText","cssPropName","outerHTML","d3Ease","mouseChaseDuration","ease","easeQuadInOut","tooltipBackground","backgroundBorderRadius","tooltipTextContainer","tooltipOffset","x","textSize","textLineHeight","valueTextSize","valueTextLineHeight","bodyFillColor","borderStrokeColor","titleFillColor","nameTextFillColor","valueTextFillColor","valueTextWeight","tooltipValueFormat","drawTooltip","getMaxLengthLine","texts","textSizes","getBBox","getTooltipPosition","mouseX","mouseY","parentChartWidth","parentChartHeight","tooltipX","tooltipY","hasEnoughHorizontalRoom","hasEnoughVerticalRoom","positionX","positionY","hideTooltip","showTooltip","dataPoint","updateContent","valueLineHeight","defaultDy","temporalHeight","tooltipValue","tooltipName","tooltipTitle","updatePositionAndSize","mousePosition","parentChartSize","duration","updateTooltip","position","chartSize","_","jsonColors","jsonLetters","Klass","defaults","attributes","extend","withPath","path","jsonURL"],"mappings":"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EAAerI,MAAf,CAAd;;AAEA,cAAKpM,oBAAL,GAA4B,YAAU;AAClC,iBAAI0U,aAAaL,EAAEM,MAAF,CAAS,EAAT,EAAa,KAAKvI,MAAlB,EAA0BmI,WAA1B,CAAjB;;AAEA,oBAAO,IAAI,KAAKC,KAAT,CAAeE,UAAf,CAAP;AACH,UAJD;;AAMA,cAAKlU,UAAL,GAAkB,YAAU;AACxB,iBAAIkU,aAAaL,EAAEM,MAAF,CAAS,EAAT,EAAa,KAAKvI,MAAlB,EAA0BkI,UAA1B,CAAjB;;AAEA,oBAAO,IAAI,KAAKE,KAAT,CAAeE,UAAf,CAAP;AACH,UAJD;;AAMA;;;;;AAKA,cAAKE,QAAL,GAAgB,UAASC,IAAT,EAAc;AAC1B,iBAAIH,aAAaL,EAAEM,MAAF,CAAS,EAAT,EAAa,KAAKvI,MAAlB,EAA0B;AACvC0I,0BAASD;AAD8B,cAA1B,CAAjB;;AAIA,oBAAO,IAAI,KAAKL,KAAT,CAAeE,UAAf,CAAP;AACH,UAND;;AAQA,cAAKzU,KAAL,GAAa,YAAW;AACpB,oBAAO,KAAKmM,MAAL,CAAYzJ,IAAnB;AACH,UAFD;AAGH;;AAED,YAAO;AACHnD,yBAAgBA;AADb,MAAP;AAGH,EA/CD,uJ;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,G;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,G","file":"demo-bar.js","sourcesContent":["'use strict';\n\nvar d3Selection = require('d3-selection'),\n\n    PubSub = require('pubsub-js'),\n\n    bar = require('./../src/charts/bar'),\n    miniTooltip = require('./../src/charts/mini-tooltip'),\n    colors = require('./../src/charts/helpers/colors'),\n\n    dataBuilder = require('./../test/fixtures/barChartDataBuilder');\n\n\nfunction createBarChart() {\n    var barChart = bar(),\n        testDataSet = new dataBuilder.BarDataBuilder(),\n        barContainer = d3Selection.select('.js-bar-chart-container'),\n        containerWidth = barContainer.node() ? barContainer.node().getBoundingClientRect().width : false,\n        dataset;\n\n    if (containerWidth) {\n        dataset = testDataSet.withLettersFrequency().build();\n\n        barChart\n            .width(containerWidth)\n            .height(300);\n\n        barContainer.datum(dataset).call(barChart);\n    }\n}\n\nfunction createHorizontalBarChart() {\n    var barChart = bar(),\n        tooltip = miniTooltip(),\n        testDataSet = new dataBuilder.BarDataBuilder(),\n        barContainer = d3Selection.select('.js-horizontal-bar-chart-container'),\n        containerWidth = barContainer.node() ? barContainer.node().getBoundingClientRect().width : false,\n        tooltipContainer,\n        dataset;\n\n    if (containerWidth) {\n        dataset = testDataSet.withColors().build();\n\n        barChart\n            .margin({\n                left: 120,\n                right: 20,\n                top: 20,\n                bottom: 30\n            })\n            .horizontal(true)\n            .colorSchema(colors.colorSchemas.britechartsColorSchema)\n            .width(containerWidth)\n            .yAxisPaddingBetweenChart(30)\n            .height(300)\n\n            .percentageAxisToMaxRatio(1.3)\n            .on('customMouseOver', tooltip.show)\n            .on('customMouseMove', tooltip.update)\n            .on('customMouseOut', tooltip.hide);\n\n        barContainer.datum(dataset).call(barChart);\n\n        tooltipContainer = d3Selection.select('.js-horizontal-bar-chart-container .bar-chart .metadata-group');\n        tooltipContainer.datum([]).call(tooltip);\n    }\n}\n\nfunction createBarChartWithTooltip() {\n    var barChart = bar(),\n        tooltip = miniTooltip(),\n        testDataSet = new dataBuilder.BarDataBuilder(),\n        barContainer = d3Selection.select('.js-bar-chart-tooltip-container'),\n        containerWidth = barContainer.node() ? barContainer.node().getBoundingClientRect().width : false,\n        tooltipContainer,\n        dataset;\n\n    if (containerWidth) {\n        d3Selection.select('.js-download-button').on('click', function() {\n            barChart.exportChart('barchart.png', 'Britecharts Bar Chart');\n        });\n\n        dataset = testDataSet.withLettersFrequency().build();\n\n        barChart\n            .width(containerWidth)\n            .height(300)\n            .usePercentage(true)\n            .on('customMouseOver', tooltip.show)\n            .on('customMouseMove', tooltip.update)\n            .on('customMouseOut', tooltip.hide);\n\n        barContainer.datum(dataset).call(barChart);\n\n        tooltipContainer = d3Selection.select('.bar-chart .metadata-group');\n        tooltipContainer.datum([]).call(tooltip);\n    }\n}\n\n// Show charts if container available\nif (d3Selection.select('.js-bar-chart-tooltip-container').node()){\n    createBarChart();\n    createHorizontalBarChart();\n    createBarChartWithTooltip();\n\n    var redrawCharts = function(){\n        d3Selection.selectAll('.bar-chart').remove();\n\n        createBarChart();\n        createHorizontalBarChart();\n        createBarChartWithTooltip();\n    };\n\n    // Redraw charts on window resize\n    PubSub.subscribe('resize', redrawCharts);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo-bar.js","define(function(require) {\n    'use strict';\n\n    const d3Array = require('d3-array');\n    const d3Axis = require('d3-axis');\n    const d3Color = require('d3-color');\n    const d3Dispatch = require('d3-dispatch');\n    const d3Format = require('d3-format');\n    const d3Scale = require('d3-scale');\n    const d3Selection = require('d3-selection');\n    const d3Transition = require('d3-transition');\n\n    const textHelper = require('./helpers/text');\n    const {exportChart} = require('./helpers/exportChart');\n    const colorHelper = require('./helpers/colors');\n\n\n    const PERCENTAGE_FORMAT = '%';\n    const NUMBER_FORMAT = ',f';\n\n\n    /**\n     * @typedef BarChartData\n     * @type {Object[]}\n     * @property {Number} value        Value of the group (required)\n     * @property {String} name         Name of the group (required)\n     *\n     * @example\n     * [\n     *     {\n     *         value: 1,\n     *         name: 'glittering'\n     *     },\n     *     {\n     *         value: 1,\n     *         name: 'luminous'\n     *     }\n     * ]\n     */\n\n    /**\n     * Bar Chart reusable API class that renders a\n     * simple and configurable bar chart.\n     *\n     * @module Bar\n     * @tutorial bar\n     * @requires d3-array, d3-axis, d3-dispatch, d3-scale, d3-selection\n     *\n     * @example\n     * var barChart = bar();\n     *\n     * barChart\n     *     .height(500)\n     *     .width(800);\n     *\n     * d3Selection.select('.css-selector')\n     *     .datum(dataset)\n     *     .call(barChart);\n     *\n     */\n    return function module() {\n\n        let margin = {\n                top: 20,\n                right: 20,\n                bottom: 30,\n                left: 40\n            },\n            width = 960,\n            height = 500,\n            data,\n            chartWidth, chartHeight,\n            xScale, yScale,\n            colorSchema = colorHelper.singleColors.aloeGreen,\n            colorList,\n            colorMap,\n            numOfVerticalTicks = 5,\n            numOfHorizontalTicks = 5,\n            percentageAxisToMaxRatio = 1,\n            enablePercentageLabels = false,\n            percentageLabelMargin = 7,\n            percentageLabelSize = 12,\n            horizontalLabelFormat = '.0%',\n            verticalLabelFormat = '.0f',\n            valueLabelFormat = NUMBER_FORMAT,\n            xAxis, yAxis,\n            xAxisPadding = {\n                top: 0,\n                left: 0,\n                bottom: 0,\n                right: 0\n            },\n            yAxisPaddingBetweenChart = 10,\n            yAxisLineWrapLimit = 1,\n            horizontal = false,\n            svg,\n\n            valueLabel = 'value',\n            nameLabel = 'name',\n\n            maskGridLines,\n            baseLine,\n\n            // Dispatcher object to broadcast the mouse events\n            // Ref: https://github.com/mbostock/d3/wiki/Internals#d3_dispatch\n            dispatcher = d3Dispatch.dispatch('customMouseOver', 'customMouseOut', 'customMouseMove'),\n\n            // extractors\n            getName = ({name}) => name,\n            getValue = ({value}) => value,\n\n            _percentageLabelHorizontalX = ({value}) => xScale(value) + percentageLabelMargin,\n            _percentageLabelHorizontalY= ({name}) => yScale(name) + (yScale.bandwidth() / 2) + (percentageLabelSize * (3/8)),\n\n            _percentageLabelVerticalX = ({name}) => xScale(name),\n            _percentageLabelVerticalY = ({value}) => yScale(value) - percentageLabelMargin,\n\n            _percentageLabelHorizontalFormatValue = ({value}) => d3Format.format(horizontalLabelFormat)(value),\n            _percentageLabelVerticalFormatValue = ({value}) => d3Format.format(verticalLabelFormat)(parseFloat(value) * 100);\n\n        /**\n         * This function creates the graph using the selection as container\n         * @param  {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         * @param {BarChartData} _data The data to attach and generate the chart\n         */\n        function exports(_selection){\n            _selection.each(function(_data){\n                chartWidth = width - margin.left - margin.right - (yAxisPaddingBetweenChart * 1.2);\n                chartHeight = height - margin.top - margin.bottom;\n                data = cleanData(_data);\n\n                buildScales();\n                buildAxis();\n                buildSVG(this);\n                drawGridLines();\n                drawBars();\n                drawAxis();\n                if (enablePercentageLabels) {\n                    drawPercentageLabels();\n                }\n            });\n        }\n\n        /**\n         * Creates the d3 x and y axis, setting orientations\n         * @private\n         */\n        function buildAxis(){\n            if (!horizontal) {\n                xAxis = d3Axis.axisBottom(xScale);\n\n                yAxis = d3Axis.axisLeft(yScale)\n                    .ticks(numOfVerticalTicks, valueLabelFormat)\n            } else {\n                xAxis = d3Axis.axisBottom(xScale)\n                    .ticks(numOfHorizontalTicks, valueLabelFormat)\n                    .tickSizeInner([-chartHeight]);\n\n                yAxis = d3Axis.axisLeft(yScale);\n            }\n        }\n\n        /**\n         * Builds containers for the chart, the axis and a wrapper for all of them\n         * Also applies the Margin convention\n         * @private\n         */\n        function buildContainerGroups(){\n            let container = svg\n              .append('g')\n                .classed('container-group', true)\n                .attr('transform', `translate(${margin.left + yAxisPaddingBetweenChart}, ${margin.top})`);\n\n            container\n                .append('g').classed('grid-lines-group', true);\n            container\n                .append('g').classed('chart-group', true);\n            container\n                .append('g').classed('x-axis-group axis', true);\n            container\n                .append('g')\n                .attr('transform', `translate(${-1 * (yAxisPaddingBetweenChart)}, 0)`)\n                .classed('y-axis-group axis', true);\n            container\n                .append('g').classed('metadata-group', true);\n        }\n\n        /**\n         * Creates the x and y scales of the graph\n         * @private\n         */\n        function buildScales() {\n            let percentageAxis = Math.min(percentageAxisToMaxRatio * d3Array.max(data, getValue))\n\n            if (!horizontal) {\n                xScale = d3Scale.scaleBand()\n                    .domain(data.map(getName))\n                    .rangeRound([0, chartWidth])\n                    .padding(0.1);\n\n                yScale = d3Scale.scaleLinear()\n                    .domain([0, percentageAxis])\n                    .rangeRound([chartHeight, 0]);\n            } else {\n                xScale = d3Scale.scaleLinear()\n                    .domain([0, percentageAxis])\n                    .rangeRound([0, chartWidth]);\n\n                yScale = d3Scale.scaleBand()\n                    .domain(data.map(getName))\n                    .rangeRound([chartHeight, 0])\n                    .padding(0.1);\n            }\n\n            colorList = data.map(d => d)\n                            .reverse()\n                            .map(({name}, i) => ({\n                                    name,\n                                    color: colorSchema[i % colorSchema.length]}\n                                ));\n\n            colorMap = (item) => colorList.filter(({name}) => name === item)[0].color;\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container){\n            if (!svg) {\n                svg = d3Selection.select(container)\n                  .append('svg')\n                    .classed('britechart bar-chart', true);\n\n                buildContainerGroups();\n            }\n\n            svg\n                .attr('width', width)\n                .attr('height', height);\n        }\n\n        /**\n         * Cleaning data adding the proper format\n         * @param  {BarChartData} data Data\n         * @private\n         */\n        function cleanData(data) {\n            return data.map((d) => {\n                d.value = +d[valueLabel];\n                d.name = String(d[nameLabel]);\n\n                return d;\n            });\n        }\n\n        /**\n         * Utility function that wraps a text into the given width\n         * @param  {D3Selection} text         Text to write\n         * @param  {Number} containerWidth\n         * @private\n         */\n        function wrapText(text, containerWidth) {\n            textHelper.wrapTextWithEllipses(text, containerWidth, 0, yAxisLineWrapLimit)\n        }\n\n        /**\n         * Draws the x and y axis on the svg object within their\n         * respective groups\n         * @private\n         */\n        function drawAxis(){\n            svg.select('.x-axis-group.axis')\n                .attr('transform', `translate(0, ${chartHeight})`)\n                .call(xAxis);\n\n            svg.select('.y-axis-group.axis')\n                .call(yAxis);\n\n            svg.selectAll('.y-axis-group .tick text')\n                .call(wrapText, margin.left - yAxisPaddingBetweenChart)\n        }\n\n        /**\n         * Draws the bars along the x axis\n         * @param  {D3Selection} bars Selection of bars\n         * @return {void}\n         */\n        function drawHorizontalBars(bars) {\n            // Enter + Update\n            bars.enter()\n              .append('rect')\n                .classed('bar', true)\n                .attr('y', chartHeight)\n                .attr('x', 0)\n                .attr('height', yScale.bandwidth())\n                .attr('width', ({value}) => xScale(value))\n                .attr('fill', ({name}) => colorMap(name))\n                .on('mouseover', function() {\n                    dispatcher.call('customMouseOver', this);\n                    d3Selection.select(this).attr('fill', ({name}) => d3Color.color(colorMap(name)).darker());\n                })\n                .on('mousemove', function(d) {\n                    dispatcher.call('customMouseMove', this, d, d3Selection.mouse(this), [chartWidth, chartHeight]);\n                })\n                .on('mouseout', function() {\n                    dispatcher.call('customMouseOut', this);\n                    d3Selection.select(this).attr('fill', ({name}) => colorMap(name))\n                })\n              .merge(bars)\n                .attr('x', 0)\n                .attr('y', ({name}) => yScale(name))\n                .attr('height', yScale.bandwidth())\n                .attr('width', ({value}) => xScale(value));\n        }\n\n        /**\n         * Draws the bars along the y axis\n         * @param  {D3Selection} bars Selection of bars\n         * @return {void}\n         */\n        function drawVerticalBars(bars) {\n            // Enter + Update\n            bars.enter()\n              .append('rect')\n                .classed('bar', true)\n                .attr('x', chartWidth)\n                .attr('y', ({value}) => yScale(value))\n                .attr('width', xScale.bandwidth())\n                .attr('height', ({value}) => chartHeight - yScale(value))\n                .attr('fill', ({name}) => colorMap(name))\n                .on('mouseover', function() {\n                    dispatcher.call('customMouseOver', this);\n                    d3Selection.select(this).attr('fill', ({name}) => d3Color.color(colorMap(name)).darker())\n                })\n                .on('mousemove', function(d) {\n                    dispatcher.call('customMouseMove', this, d, d3Selection.mouse(this), [chartWidth, chartHeight]);\n                })\n                .on('mouseout', function() {\n                    dispatcher.call('customMouseOut', this);\n                    d3Selection.select(this).attr('fill', ({name}) => colorMap(name))\n                })\n              .merge(bars)\n                .attr('x', ({name}) => xScale(name))\n                .attr('y', ({value}) => yScale(value))\n                .attr('width', xScale.bandwidth())\n                .attr('height', ({value}) => chartHeight - yScale(value));\n        }\n\n        /**\n         * Draws percentage labels at the end of each bar\n         * @private\n         * @return {void}\n         */\n        function drawPercentageLabels() {\n            let labelXPosition = horizontal ? _percentageLabelHorizontalX : _percentageLabelVerticalX;\n            let labelYPosition = horizontal ? _percentageLabelHorizontalY : _percentageLabelVerticalY;\n            let text = horizontal ? _percentageLabelHorizontalFormatValue : _percentageLabelVerticalFormatValue;\n\n            let percentageLabels = svg.select('.metadata-group')\n              .append('g')\n                .classed('percentage-label-group', true)\n                .selectAll('text')\n                .data(data.reverse())\n                .enter()\n              .append('text');\n\n            percentageLabels\n                .classed('percentage-label', true)\n                .attr('x', labelXPosition)\n                .attr('y', labelYPosition)\n                .text(text)\n                .attr('font-size', percentageLabelSize + 'px')\n        }\n\n        /**\n         * Draws the bar elements within the chart group\n         * @private\n         */\n        function drawBars(){\n            let bars = svg.select('.chart-group').selectAll('.bar').data(data);\n\n            if (!horizontal) {\n                drawVerticalBars(bars);\n            } else {\n                drawHorizontalBars(bars)\n            }\n\n            // Exit\n            bars.exit()\n                .transition()\n                .style('opacity', 0)\n                .remove();\n        }\n\n        /**\n         * Draws grid lines on the background of the chart\n         * @return void\n         */\n        function drawGridLines(){\n            if (!horizontal) {\n                drawVerticalGridLines();\n            } else {\n                drawHorizontalGridLines();\n            }\n        }\n\n        /**\n         * Draws the grid lines for an horizontal bar chart\n         * @return {void}\n         */\n        function drawHorizontalGridLines() {\n            maskGridLines = svg.select('.grid-lines-group')\n                .selectAll('line.vertical-grid-line')\n                .data(xScale.ticks(4))\n                .enter()\n                  .append('line')\n                    .attr('class', 'vertical-grid-line')\n                    .attr('y1', (xAxisPadding.left))\n                    .attr('y2', chartHeight)\n                    .attr('x1', (d) => xScale(d))\n                    .attr('x2', (d) => xScale(d))\n\n            //draw a horizontal line to extend y-axis till the edges\n            baseLine = svg.select('.grid-lines-group')\n                .selectAll('line.extended-y-line')\n                .data([0])\n                .enter()\n                  .append('line')\n                    .attr('class', 'extended-y-line')\n                    .attr('y1', (xAxisPadding.left))\n                    .attr('y2', chartHeight)\n                    .attr('x1', 0)\n                    .attr('x2', 0);\n        }\n\n        /**\n         * Draws the grid lines for a vertical bar chart\n         * @return {void}\n         */\n        function drawVerticalGridLines() {\n            maskGridLines = svg.select('.grid-lines-group')\n                .selectAll('line.horizontal-grid-line')\n                .data(yScale.ticks(4))\n                .enter()\n                  .append('line')\n                    .attr('class', 'horizontal-grid-line')\n                    .attr('x1', (xAxisPadding.left))\n                    .attr('x2', chartWidth)\n                    .attr('y1', (d) => yScale(d))\n                    .attr('y2', (d) => yScale(d))\n\n            //draw a horizontal line to extend x-axis till the edges\n            baseLine = svg.select('.grid-lines-group')\n                .selectAll('line.extended-x-line')\n                .data([0])\n                .enter()\n                  .append('line')\n                    .attr('class', 'extended-x-line')\n                    .attr('x1', (xAxisPadding.left))\n                    .attr('x2', chartWidth)\n                    .attr('y1', height - margin.bottom - margin.top)\n                    .attr('y2', height - margin.bottom - margin.top);\n        }\n\n        /**\n         * Chart exported to png and a download action is fired\n         * @public\n         */\n        exports.exportChart = function(filename) {\n            exportChart.call(exports, svg, filename);\n        };\n\n        /**\n         * Gets or Sets the height of the chart\n         * @param  {number} _x Desired width for the graph\n         * @return { height | module} Current height or Bar Chart module to chain calls\n         * @public\n         */\n        exports.height = function(_x) {\n            if (!arguments.length) {\n                return height;\n            }\n            height = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the margin of the chart\n         * @param  {object} _x Margin object to get/set\n         * @return { margin | module} Current margin or Bar Chart module to chain calls\n         * @public\n         */\n        exports.margin = function(_x) {\n            if (!arguments.length) {\n                return margin;\n            }\n            margin = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the width of the chart\n         * @param  {number} _x Desired width for the graph\n         * @return { width | module} Current width or Bar Chart module to chain calls\n         * @public\n         */\n        exports.width = function(_x) {\n            if (!arguments.length) {\n                return width;\n            }\n            width = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the horizontal direction of the chart\n         * @param  {number} _x Desired horizontal direction for the graph\n         * @return { horizontal | module} Current horizontal direction or Bar Chart module to chain calls\n         * @public\n         */\n        exports.horizontal = function(_x) {\n            if (!arguments.length) {\n                return horizontal;\n            }\n            horizontal = _x;\n            return this;\n        };\n\n        /**\n         * Exposes an 'on' method that acts as a bridge with the event dispatcher\n         * We are going to expose this events:\n         * customMouseOver, customMouseMove and customMouseOut\n         *\n         * @return {module} Bar Chart\n         * @public\n         */\n        exports.on = function() {\n            let value = dispatcher.on.apply(dispatcher, arguments);\n\n            return value === dispatcher ? exports : value;\n        };\n\n        /**\n         * Chart exported to png and a download action is fired\n         * @public\n         */\n        exports.exportChart = function(filename, title) {\n            exportChart.call(exports, svg, filename, title);\n        };\n\n        /**\n         * Gets or Sets the colorSchema of the chart\n         * @param  {String[]} _x Desired colorSchema for the graph\n         * @return { colorSchema | module} Current colorSchema or Chart module to chain calls\n         * @public\n         */\n        exports.colorSchema = function(_x) {\n            if (!arguments.length) {\n                return colorSchema;\n            }\n            colorSchema = _x;\n            return this;\n        }\n\n        /**\n         * Gets or Sets the valueLabelFormat to a percentage format if true (default false)\n         * @param  {boolean} _x     Should use percentage as value format\n         * @return { valueLabelFormat | module} Is percentage value format used or Chart module to chain calls\n         * @public\n         */\n        exports.usePercentage = function(_x) {\n            if (!arguments.length) {\n                return valueLabelFormat === PERCENTAGE_FORMAT;\n            }\n            if (_x) {\n                valueLabelFormat = PERCENTAGE_FORMAT;\n            } else {\n                valueLabelFormat = NUMBER_FORMAT;\n            }\n            return this;\n        }\n\n        /**\n         * Configurable extension of the x axis\n         * if your max point was 50% you might want to show x axis to 60%, pass 1.2\n         * @param  {number} _x ratio to max data point to add to the x axis\n         * @return { ratio | module} Current ratio or Bar Chart module to chain calls\n         * @public\n         */\n        exports.percentageAxisToMaxRatio = function(_x) {\n            if (!arguments.length) {\n                return percentageAxisToMaxRatio;\n            }\n            percentageAxisToMaxRatio = _x;\n            return this;\n        }\n\n        /**\n         * Default 10px. Offset between end of bar and start of the percentage bars\n         * @param  {number} _x percentage margin offset from end of bar\n         * @return {number | module}    Currnet offset or Bar Chart module to chain calls\n         */\n        exports.percentageLabelMargin = function(_x) {\n            if (!arguments.length) {\n                return percentageLabelMargin;\n            }\n            percentageLabelMargin = _x;\n            return this;\n        }\n\n        /**\n         * Default false. If true, adds percentage labels at the end of the bars\n         * @param  {Boolean} _x\n         * @return {Boolean | module}    Current value of enablePercentageLables or Bar Chart module to chain calls\n         */\n        exports.enablePercentageLabels = function(_x) {\n            if (!arguments.length) {\n                return enablePercentageLabels;\n            }\n            enablePercentageLabels = _x;\n            return this;\n        }\n\n        /**\n         * Default 10. Space between y axis and chart\n         * @param  {number} _x space between y axis and chart\n         * @return {number| module}    Current value of yAxisPaddingBetweenChart or Bar Chart module to chain calls\n         */\n        exports.yAxisPaddingBetweenChart = function(_x) {\n            if (!arguments.length) {\n                return yAxisPaddingBetweenChart;\n            }\n            yAxisPaddingBetweenChart = _x;\n            return this;\n        }\n\n        /**\n         * Gets or Sets the valueLabel of the chart\n         * @param  {Number} _x Desired valueLabel for the graph\n         * @return { valueLabel | module} Current valueLabel or Chart module to chain calls\n         * @public\n         */\n        exports.valueLabel = function(_x) {\n            if (!arguments.length) {\n                return valueLabel;\n            }\n            valueLabel = _x;\n            return this;\n        };\n\n        /**\n         * Gets or Sets the nameLabel of the chart\n         * @param  {Number} _x Desired nameLabel for the graph\n         * @return { nameLabel | module} Current nameLabel or Chart module to chain calls\n         * @public\n         */\n        exports.nameLabel = function(_x) {\n            if (!arguments.length) {\n                return nameLabel;\n            }\n            nameLabel = _x;\n            return this;\n        };\n\n        return exports;\n    };\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/bar.js","// https://d3js.org/d3-axis/ Version 1.0.7. Copyright 2017 Mike Bostock.\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.d3 = global.d3 || {})));\n}(this, (function (exports) { 'use strict';\n\nvar slice = Array.prototype.slice;\n\nvar identity = function(x) {\n  return x;\n};\n\nvar top = 1;\nvar right = 2;\nvar bottom = 3;\nvar left = 4;\nvar epsilon = 1e-6;\n\nfunction translateX(x) {\n  return \"translate(\" + (x + 0.5) + \",0)\";\n}\n\nfunction translateY(y) {\n  return \"translate(0,\" + (y + 0.5) + \")\";\n}\n\nfunction center(scale) {\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n  if (scale.round()) offset = Math.round(offset);\n  return function(d) {\n    return scale(d) + offset;\n  };\n}\n\nfunction entering() {\n  return !this.__axis;\n}\n\nfunction axis(orient, scale) {\n  var tickArguments = [],\n      tickValues = null,\n      tickFormat = null,\n      tickSizeInner = 6,\n      tickSizeOuter = 6,\n      tickPadding = 3,\n      k = orient === top || orient === left ? -1 : 1,\n      x = orient === left || orient === right ? \"x\" : \"y\",\n      transform = orient === top || orient === bottom ? translateX : translateY;\n\n  function axis(context) {\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\n        range = scale.range(),\n        range0 = range[0] + 0.5,\n        range1 = range[range.length - 1] + 0.5,\n        position = (scale.bandwidth ? center : identity)(scale.copy()),\n        selection = context.selection ? context.selection() : context,\n        path = selection.selectAll(\".domain\").data([null]),\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\n        tickExit = tick.exit(),\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\n        line = tick.select(\"line\"),\n        text = tick.select(\"text\");\n\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\n        .attr(\"class\", \"domain\")\n        .attr(\"stroke\", \"#000\"));\n\n    tick = tick.merge(tickEnter);\n\n    line = line.merge(tickEnter.append(\"line\")\n        .attr(\"stroke\", \"#000\")\n        .attr(x + \"2\", k * tickSizeInner));\n\n    text = text.merge(tickEnter.append(\"text\")\n        .attr(\"fill\", \"#000\")\n        .attr(x, k * spacing)\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n\n    if (context !== selection) {\n      path = path.transition(context);\n      tick = tick.transition(context);\n      line = line.transition(context);\n      text = text.transition(context);\n\n      tickExit = tickExit.transition(context)\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\n\n      tickEnter\n          .attr(\"opacity\", epsilon)\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\n    }\n\n    tickExit.remove();\n\n    path\n        .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n\n    tick\n        .attr(\"opacity\", 1)\n        .attr(\"transform\", function(d) { return transform(position(d)); });\n\n    line\n        .attr(x + \"2\", k * tickSizeInner);\n\n    text\n        .attr(x, k * spacing)\n        .text(format);\n\n    selection.filter(entering)\n        .attr(\"fill\", \"none\")\n        .attr(\"font-size\", 10)\n        .attr(\"font-family\", \"sans-serif\")\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n\n    selection\n        .each(function() { this.__axis = position; });\n  }\n\n  axis.scale = function(_) {\n    return arguments.length ? (scale = _, axis) : scale;\n  };\n\n  axis.ticks = function() {\n    return tickArguments = slice.call(arguments), axis;\n  };\n\n  axis.tickArguments = function(_) {\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n  };\n\n  axis.tickValues = function(_) {\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n  };\n\n  axis.tickFormat = function(_) {\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\n  };\n\n  axis.tickSize = function(_) {\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeInner = function(_) {\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n  };\n\n  axis.tickSizeOuter = function(_) {\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n  };\n\n  axis.tickPadding = function(_) {\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n  };\n\n  return axis;\n}\n\nfunction axisTop(scale) {\n  return axis(top, scale);\n}\n\nfunction axisRight(scale) {\n  return axis(right, scale);\n}\n\nfunction axisBottom(scale) {\n  return axis(bottom, scale);\n}\n\nfunction axisLeft(scale) {\n  return axis(left, scale);\n}\n\nexports.axisTop = axisTop;\nexports.axisRight = axisRight;\nexports.axisBottom = axisBottom;\nexports.axisLeft = axisLeft;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.0.7@d3-axis/build/d3-axis.js\n// module id = 5\n// module chunks = 0 1 3 5 6","define(function(require) {\n\n    const d3Selection = require('d3-selection');\n\n    const wrapConfig = {\n        lineHeight: 1.2,\n        smallTextOffset: 10,\n        smallTextLineHeightRatio: 0.9,\n        smallTextRatio: 0.6,\n        valueClassName: 'value',\n        labelClassName: 'label'\n    };\n\n    const defaultTextSize = 12;\n    const defaultFontFace = 'Arial';\n\n    /**\n     * Wraps a selection of text within the available width\n     * @param  {Number} fontSize       Size of the base font\n     * @param  {Number} availableWidth Width of the container where the text needs to wrap on\n     * @param  {D3Selection} node      SVG text element that contains the text to wrap\n     *\n     * REF: http://bl.ocks.org/mbostock/7555321\n     * More discussions on https://github.com/mbostock/d3/issues/1642\n     * @return {void}\n     */\n    const wrapText = function(xOffset, fontSize, availableWidth, node, data, i) {\n        let text = d3Selection.select(node),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineNumber = 0,\n            smallLineHeight = wrapConfig.lineHeight * wrapConfig.smallTextLineHeightRatio,\n            y = text.attr('y'),\n            dy = parseFloat(text.attr('dy')),\n            smallFontSize = fontSize * wrapConfig.smallTextRatio,\n            tspan = text.text(null).append('tspan')\n                .attr('x', xOffset)\n                .attr('y', y - 5)\n                .attr('dy', dy + 'em')\n                .classed(wrapConfig.valueClassName, true)\n                .style('font-size', fontSize + 'px');\n\n        tspan.text(words.pop());\n        tspan = text.append('tspan')\n            .classed(wrapConfig.labelClassName, true)\n            .attr('x', xOffset)\n            .attr('y', y + wrapConfig.smallTextOffset)\n            .attr('dy', ++lineNumber * smallLineHeight + dy + 'em')\n            .style('font-size', smallFontSize + 'px');\n\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(' '));\n            if (tspan.node().getComputedTextLength() > availableWidth - 50) {\n                line.pop();\n                tspan.text(line.join(' '));\n                line = [word];\n                tspan = text.append('tspan')\n                    .classed(wrapConfig.labelClassName, true)\n                    .attr('x', xOffset)\n                    .attr('y', y+ wrapConfig.smallTextOffset)\n                    .attr('dy', ++lineNumber * smallLineHeight + dy + 'em')\n                    .text(word)\n                    .style('font-size', smallFontSize + 'px');\n            }\n        }\n    };\n\n    /**\n     * Wraps a selection of text within the available width, also adds class .adjust-upwards\n     * to configure a y offset for entries with multiple rows\n     * @param  {D3Sekectuib} text       d3 text element\n     * @param  {Number} width           Width of the container where the text needs to wrap on\n     * @param  {Number} xpos            number passed to determine the x offset\n     * @param  {Number} limit           number of lines before an ellipses is added and the rest of the text is cut off\n     *\n     * REF: http://bl.ocks.org/mbostock/7555321\n     * More discussions on https://github.com/mbostock/d3/issues/1642\n     * @return {void}\n     */\n    const wrapTextWithEllipses = function(text, width, xpos=0, limit=2) {\n\n            text.each(function() {\n                var words,\n                    word,\n                    line,\n                    lineNumber,\n                    lineHeight,\n                    y,\n                    dy,\n                    tspan;\n\n                text = d3Selection.select(this);\n\n                words = text.text().split(/\\s+/).reverse();\n                line = [];\n                lineNumber = 0;\n                lineHeight = 1.2;\n                y = text.attr('y');\n                dy = parseFloat(text.attr('dy'));\n                tspan = text\n                    .text(null)\n                    .append('tspan')\n                    .attr('x', xpos)\n                    .attr('y', y)\n                    .attr('dy', dy + 'em');\n\n                while ((word = words.pop())) {\n                    line.push(word);\n                    tspan.text(line.join(' '));\n\n                    if (tspan.node().getComputedTextLength() > width) {\n                        line.pop();\n                        tspan.text(line.join(' '));\n\n                        if (lineNumber < limit - 1) {\n                            line = [word];\n                            tspan = text.append('tspan')\n                                .attr('x', xpos)\n                                .attr('y', y)\n                                .attr('dy', ++lineNumber * lineHeight + dy + 'em')\n                                .text(word);\n                            // if we need two lines for the text, move them both up to center them\n                            text.classed('adjust-upwards', true);\n                        } else {\n                            line.push('...');\n                            tspan.text(line.join(' '));\n                            break;\n                        }\n                    }\n                }\n            });\n    };\n\n    /**\n     * Figures out an approximate of the text width by using a canvas element\n     * This avoids having to actually render the text to measure it from the DOM itself\n     * @param  {String} text     Text to measure\n     * @param  {Number} fontSize Fontsize (or default)\n     * @param  {String} fontFace Font familty (or default)\n     * @return {String}          Approximate font size of the text\n     */\n    const getTextWidth = function(text, fontSize = defaultTextSize, fontFace = defaultFontFace) {\n        let a = document.createElement('canvas'),\n            b = a.getContext('2d');\n\n        b.font = fontSize + 'px ' + fontFace;\n\n        return b.measureText(text).width;\n    }\n\n    return {\n        getTextWidth,\n        wrapText,\n        wrapTextWithEllipses\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/text.js","define(function(require) {\n    'use strict';\n\n    const {colorSchemas} = require('./colors.js');\n    const constants = require('./constants.js');\n    const serializeWithStyles = require('./serializeWithStyles.js');\n\n    let encoder = window.btoa;\n\n    if (!encoder) {\n        encoder = require('base-64').encode;\n    }\n\n    // Base64 doesn't work really well with Unicode strings, so we need to use this function\n    // Ref: https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\n    const b64EncodeUnicode = (str) => {\n        return encoder(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {\n            return String.fromCharCode('0x' + p1);\n        }));\n    };\n\n    const config = {\n        styleClass : 'britechartStyle',\n        defaultFilename: 'britechart.png',\n        chartBackground: 'white',\n        imageSourceBase: 'data:image/svg+xml;base64,',\n        titleFontSize: '15px',\n        titleFontFamily: '\\'Benton Sans\\', sans-serif',\n        titleTopOffset: 30,\n        get styleBackgroundString () {\n            return `<style>svg{background:${this.chartBackground};}</style>`;\n        }\n    };\n\n    /**\n     * Main function to be used as a method by chart instances to export charts to png\n     * @param  {array} svgs         (or an svg element) pass in both chart & legend as array or just chart as svg or in array\n     * @param  {string} filename    [download to be called <filename>.png]\n     * @param  {string} title       Title for the image\n     */\n    function exportChart(d3svg, filename, title) {\n        let img = createImage(convertSvgToHtml.call(this, d3svg, title));\n\n        img.onload = handleImageLoad.bind(\n                img,\n                createCanvas(this.width(), this.height()),\n                filename\n            );\n    }\n\n    /**\n     * adds background styles to raw html\n     * @param {string} html raw html\n     */\n    function addBackground(html) {\n        return html.replace('>',`>${config.styleBackgroundString}`);\n    }\n\n    /**\n     * takes d3 svg el, adds proper svg tags, adds inline styles\n     * from stylesheets, adds white background and returns string\n     * @param  {object} d3svg TYPE d3 svg element\n     * @return {string} string of passed d3\n     */\n    function convertSvgToHtml (d3svg, title) {\n        if (!d3svg) {\n            return;\n        }\n\n        d3svg.attr('version', 1.1)\n            .attr('xmlns', 'http://www.w3.org/2000/svg');\n        let serializer = serializeWithStyles.initializeSerializer();\n        let html = serializer(d3svg.node());\n        html = formatHtmlByBrowser(html);\n        html = prependTitle.call(this, html, title, parseInt(d3svg.attr('width')));\n        html = addBackground(html);\n\n        return html;\n    }\n\n    /**\n     * Create Canvas\n     * @param  {number} width\n     * @param  {number} height\n     * @return {object} TYPE canvas element\n     */\n    function createCanvas(width, height) {\n        let canvas = document.createElement('canvas');\n\n        canvas.height = height;\n        canvas.width = width;\n\n        return canvas;\n    }\n\n    /**\n     * Create Image\n     * @param  {string} svgHtml string representation of svg el\n     * @return {object}  TYPE element <img>, src points at svg\n     */\n    function createImage(svgHtml) {\n        let img = new Image();\n\n        img.src = `${config.imageSourceBase}${ b64EncodeUnicode(svgHtml) }`;\n\n        return img;\n    };\n\n    /**\n     * Draws image on canvas\n     * @param  {object} image TYPE:el <img>, to be drawn\n     * @param  {object} canvas TYPE: el <canvas>, to draw on\n     */\n    function drawImageOnCanvas(image, canvas) {\n        canvas.getContext('2d').drawImage(image, 0, 0);\n\n        return canvas;\n    }\n\n    /**\n     * Triggers browser to download image, convert canvas to url,\n     * we need to append the link el to the dom before clicking it for Firefox to register\n     * point <a> at it and trigger click\n     * @param  {object} canvas TYPE: el <canvas>\n     * @param  {string} filename\n     * @param  {string} extensionType\n     */\n    function downloadCanvas(canvas, filename=config.defaultFilename, extensionType='image/png') {\n        let url = canvas.toDataURL(extensionType);\n        let link = document.createElement('a');\n\n        link.href = url;\n        link.download = filename;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n    }\n\n    /**\n     * Some browsers need special formatting, we handle that here\n     * @param  {string} html string of svg html\n     * @return {string} string of svg html\n     */\n    function formatHtmlByBrowser(html) {\n        if (navigator.userAgent.search('FireFox') > -1) {\n            return html.replace(/url.*&quot;\\)/, `url(&quot;#${constants.lineGradientId}&quot;);`);\n        }\n\n        return html;\n    }\n\n    /**\n     * Handles on load event fired by img.onload, this=img\n     * @param  {object} canvas TYPE: el <canvas>\n     * @param  {string} filename\n     * @param  {object} e\n     */\n    function handleImageLoad(canvas, filename, e) {\n        e.preventDefault();\n\n        downloadCanvas(drawImageOnCanvas(this, canvas), filename);\n    }\n\n    /**\n     * if passed, append title to the raw html to appear on graph\n     * @param  {string} html     raw html string\n     * @param  {string} title    title of the graph\n     * @param  {number} svgWidth width of graph container\n     * @return {string}         raw html with title prepended\n     */\n    function prependTitle(html, title, svgWidth) {\n        if (!title || !svgWidth) {\n            return html;\n        }\n        let {britechartsGreySchema} = colorSchemas;\n        html =  html.replace(/<g/,`<text x=\"${this.margin().left}\" y=\"${config.titleTopOffset}\" font-family=\"${config.titleFontFamily}\" font-size=\"${config.titleFontSize}\" fill=\"${britechartsGreySchema[6]}\"> ${title} </text><g `);\n\n        return html;\n    }\n\n    return {\n        exportChart,\n        convertSvgToHtml,\n        createImage,\n        drawImageOnCanvas\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/exportChart.js","module.exports = (function() {\n\n    'use strict';\n\n    return {\n\n        /**\n         * returns serializer function, only run it when you know you want to serialize your chart\n         * @return {func} serializer to add styles in line to dom string\n         */\n        initializeSerializer() {\n\n            // Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\n            const defaultStylesByTagName = {};\n\n            // Styles inherited from style sheets will not be rendered for elements with these tag names\n            const noStyleTags = {'BASE':true,'HEAD':true,'HTML':true,'META':true,'NOFRAME':true,'NOSCRIPT':true,'PARAM':true,'SCRIPT':true,'STYLE':true,'TITLE':true};\n\n            // This list determines which css default values lookup tables are precomputed at load time\n            // Lookup tables for other tag names will be automatically built at runtime if needed\n            const tagNames = ['A','ABBR','ADDRESS','AREA','ARTICLE','ASIDE','AUDIO','B','BASE','BDI','BDO','BLOCKQUOTE','BODY','BR','BUTTON','CANVAS','CAPTION','CENTER','CITE','CODE','COL','COLGROUP','COMMAND','DATALIST','DD','DEL','DETAILS','DFN','DIV','DL','DT','EM','EMBED','FIELDSET','FIGCAPTION','FIGURE','FONT','FOOTER','FORM','H1','H2','H3','H4','H5','H6','HEAD','HEADER','HGROUP','HR','HTML','I','IFRAME','IMG','INPUT','INS','KBD','LABEL','LEGEND','LI','LINK','MAP','MARK','MATH','MENU','META','METER','NAV','NOBR','NOSCRIPT','OBJECT','OL','OPTION','OPTGROUP','OUTPUT','P','PARAM','PRE','PROGRESS','Q','RP','RT','RUBY','S','SAMP','SCRIPT','SECTION','SELECT','SMALL','SOURCE','SPAN','STRONG','STYLE','SUB','SUMMARY','SUP','SVG','TABLE','TBODY','TD','TEXTAREA','TFOOT','TH','THEAD','TIME','TITLE','TR','TRACK','U','UL','VAR','VIDEO','WBR'];\n\n            // Precompute the lookup tables.\n            [].forEach.call(tagNames, (name) => {\n                if (!noStyleTags[name]) {\n                    defaultStylesByTagName[name] = computeDefaultStyleByTagName(name);\n                }\n            });\n\n            function computeDefaultStyleByTagName(tagName) {\n                let defaultStyle = {},\n                    element = document.body.appendChild(document.createElement(tagName)),\n                    computedStyle = window.getComputedStyle(element);\n\n                [].forEach.call(computedStyle, (style) => {\n                    defaultStyle[style] = computedStyle[style];\n                });\n                document.body.removeChild(element);\n                return defaultStyle;\n            }\n\n            function getDefaultStyleByTagName (tagName) {\n                tagName = tagName.toUpperCase();\n                if (!defaultStylesByTagName[tagName]) {\n                    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n                }\n                return defaultStylesByTagName[tagName];\n            };\n\n            function serializeWithStyles(elem) {\n\n                let cssTexts = [],\n                    elements,\n                    computedStyle,\n                    defaultStyle,\n                    result;\n\n                if (!elem || elem.nodeType !== Node.ELEMENT_NODE) {\n                    console.error('Error: Object passed in to serializeWithSyles not of nodeType Node.ELEMENT_NODE');\n                    return;\n                }\n\n                cssTexts = [];\n                elements = elem.querySelectorAll('*');\n\n                [].forEach.call(elements, (el, i) => {\n                    if (!noStyleTags[el.tagName]) {\n                        computedStyle = window.getComputedStyle(el);\n                        defaultStyle = getDefaultStyleByTagName(el.tagName);\n                        cssTexts[i] = el.style.cssText;\n                        [].forEach.call(computedStyle, (cssPropName) => {\n                            if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n                                el.style[cssPropName] = computedStyle[cssPropName];\n                            }\n                        });\n                    }\n                });\n\n                result = elem.outerHTML;\n                elements = [].map.call(elements, (el, i) => {\n                    el.style.cssText = cssTexts[i];\n                    return el;\n                });\n\n                return result;\n\n            };\n\n            return serializeWithStyles;\n        }\n    }\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/charts/helpers/serializeWithStyles.js","/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */\n;(function(root) {\n\n\t// Detect free variables `exports`.\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`.\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\n\t// it as `root`.\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar InvalidCharacterError = function(message) {\n\t\tthis.message = message;\n\t};\n\tInvalidCharacterError.prototype = new Error;\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\n\tvar error = function(message) {\n\t\t// Note: the error messages used throughout this file match those used by\n\t\t// the native `atob`/`btoa` implementation in Chromium.\n\t\tthrow new InvalidCharacterError(message);\n\t};\n\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\n\tvar REGEX_SPACE_CHARACTERS = /[\\t\\n\\f\\r ]/g;\n\n\t// `decode` is designed to be fully compatible with `atob` as described in the\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\n\t// The optimized base64-decoding algorithm used is based on @atks excellent\n\t// implementation. https://gist.github.com/atk/1020396\n\tvar decode = function(input) {\n\t\tinput = String(input)\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\n\t\tvar length = input.length;\n\t\tif (length % 4 == 0) {\n\t\t\tinput = input.replace(/==?$/, '');\n\t\t\tlength = input.length;\n\t\t}\n\t\tif (\n\t\t\tlength % 4 == 1 ||\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\n\t\t) {\n\t\t\terror(\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\n\t\t\t);\n\t\t}\n\t\tvar bitCounter = 0;\n\t\tvar bitStorage;\n\t\tvar buffer;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\twhile (++position < length) {\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\n\t\t\t// Unless this is the first of a group of 4 characters\n\t\t\tif (bitCounter++ % 4) {\n\t\t\t\t// convert the first 8 bits to a single ASCII character.\n\t\t\t\toutput += String.fromCharCode(\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t};\n\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\n\tvar encode = function(input) {\n\t\tinput = String(input);\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\n\t\t\terror(\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\n\t\t\t\t'Latin1 range.'\n\t\t\t);\n\t\t}\n\t\tvar padding = input.length % 3;\n\t\tvar output = '';\n\t\tvar position = -1;\n\t\tvar a;\n\t\tvar b;\n\t\tvar c;\n\t\tvar d;\n\t\tvar buffer;\n\t\t// Make sure any padding is handled outside of the loop.\n\t\tvar length = input.length - padding;\n\n\t\twhile (++position < length) {\n\t\t\t// Read three bytes, i.e. 24 bits.\n\t\t\ta = input.charCodeAt(position) << 16;\n\t\t\tb = input.charCodeAt(++position) << 8;\n\t\t\tc = input.charCodeAt(++position);\n\t\t\tbuffer = a + b + c;\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\n\t\t\t// matching character for each of them to the output.\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\n\t\t\t);\n\t\t}\n\n\t\tif (padding == 2) {\n\t\t\ta = input.charCodeAt(position) << 8;\n\t\t\tb = input.charCodeAt(++position);\n\t\t\tbuffer = a + b;\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 10) +\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\n\t\t\t\t'='\n\t\t\t);\n\t\t} else if (padding == 1) {\n\t\t\tbuffer = input.charCodeAt(position);\n\t\t\toutput += (\n\t\t\t\tTABLE.charAt(buffer >> 2) +\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\n\t\t\t\t'=='\n\t\t\t);\n\t\t}\n\n\t\treturn output;\n\t};\n\n\tvar base64 = {\n\t\t'encode': encode,\n\t\t'decode': decode,\n\t\t'version': '0.1.0'\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn base64;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = base64;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (var key in base64) {\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.base64 = base64;\n\t}\n\n}(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.1.0@base-64/base64.js\n// module id = 22\n// module chunks = 0 2 3 4 5 6","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 23\n// module chunks = 0 2 3 4 5 6","define(function(require){\n    'use strict';\n\n    const d3Array = require('d3-array');\n    const d3Ease = require('d3-ease');\n    const d3Format = require('d3-format');\n    const d3Selection = require('d3-selection');\n    const d3Transition = require('d3-transition');\n\n\n    /**\n     * Mini Tooltip Component reusable API class that renders a\n     * simple and configurable tooltip element for Britechart's\n     * bar and step chart.\n     *\n     * @module Mini-tooltip\n     * @tutorial bar\n     * @requires d3\n     *\n     * @example\n     * var barChart = line(),\n     *     miniTooltip = miniTooltip();\n     *\n     * barChart\n     *     .width(500)\n     *     .height(300)\n     *     .on('customMouseHover', miniTooltip.show)\n     *     .on('customMouseMove', miniTooltip.update)\n     *     .on('customMouseOut', miniTooltip.hide);\n     *\n     * d3Selection.select('.css-selector')\n     *     .datum(dataset)\n     *     .call(barChart);\n     *\n     * d3Selection.select('.metadata-group .mini-tooltip-container')\n     *     .datum([])\n     *     .call(miniTooltip);\n     *\n     */\n    return function module() {\n\n        let margin = {\n                top: 12,\n                right: 12,\n                bottom: 12,\n                left: 12\n            },\n            width = 100,\n            height = 100,\n\n            // Optional Title\n            title = '',\n\n            // Data Format\n            valueLabel = 'value',\n            nameLabel = 'name',\n\n            // Animations\n            mouseChaseDuration = 100,\n            ease = d3Ease.easeQuadInOut,\n\n            // tooltip\n            tooltipBackground,\n            backgroundBorderRadius = 1,\n            tooltipTextContainer,\n            tooltipOffset = {\n                y: 0,\n                x: 20\n            },\n\n            // Fonts\n            textSize = 14,\n            textLineHeight = 1.5,\n            valueTextSize = 27,\n            valueTextLineHeight = 1.18,\n\n            // Colors\n            bodyFillColor = '#FFFFFF',\n            borderStrokeColor = '#D2D6DF',\n            titleFillColor = '#666a73',\n            nameTextFillColor = '#666a73',\n            valueTextFillColor = '#45494E',\n            valueTextWeight = 200,\n\n            // formats\n            tooltipValueFormat = d3Format.format('.2f'),\n\n            chartWidth,\n            chartHeight,\n            svg;\n\n\n        /**\n         * This function creates the graph using the selection as container\n         * @param {D3Selection} _selection A d3 selection that represents\n         *                                  the container(s) where the chart(s) will be rendered\n         * @param {Array} _data The data to attach and generate the chart (usually an empty array)\n         */\n        function exports(_selection) {\n            _selection.each(function(_data){\n                chartWidth = width - margin.left - margin.right;\n                chartHeight = height - margin.top - margin.bottom;\n\n                buildSVG(this);\n                drawTooltip();\n            });\n        }\n\n        /**\n         * Builds containers for the tooltip\n         * Also applies the Margin convention\n         * @private\n         */\n        function buildContainerGroups() {\n            let container = svg\n              .append('g')\n                .classed('tooltip-container-group', true)\n                .attr('transform', `translate( ${margin.left}, ${margin.top})`);\n\n            container.append('g').classed('tooltip-group', true);\n        }\n\n        /**\n         * Builds the SVG element that will contain the chart\n         * @param  {HTMLElement} container DOM element that will work as the container of the graph\n         * @private\n         */\n        function buildSVG(container) {\n            if (!svg) {\n                svg = d3Selection.select(container)\n                    .append('g')\n                    .classed('britechart britechart-mini-tooltip', true);\n\n                buildContainerGroups();\n            }\n            svg\n                .transition()\n                .attr('width', width)\n                .attr('height', height);\n\n            // Hidden by default\n            exports.hide();\n        }\n\n        /**\n         * Draws the different elements of the Tooltip box\n         * @return void\n         */\n        function drawTooltip(){\n            tooltipTextContainer = svg.selectAll('.tooltip-group')\n                .append('g')\n                .classed('tooltip-text', true);\n\n            tooltipBackground = tooltipTextContainer\n              .append('rect')\n                .classed('tooltip-background', true)\n                .attr('width', width)\n                .attr('height', height)\n                .attr('rx', backgroundBorderRadius)\n                .attr('ry', backgroundBorderRadius)\n                .attr('y', - margin.top)\n                .attr('x', - margin.left)\n                .style('fill', bodyFillColor)\n                .style('stroke', borderStrokeColor)\n                .style('stroke-width', 1)\n                .style('pointer-events', 'none')\n                .style('opacity', 0.9);\n        }\n\n        /**\n         * Figures out the max length of the tooltip lines\n         * @param  {D3Selection[]} texts    List of svg elements of each line\n         * @return {Number}                 Max size of the lines\n         */\n        function getMaxLengthLine(...texts) {\n            let textSizes = texts.filter(x => !!x)\n                .map(x => x.node().getBBox().width);\n\n            return d3Array.max(textSizes);\n        }\n\n        /**\n         * Calculates the desired position for the tooltip\n         * @param  {Number} mouseX             Current horizontal mouse position\n         * @param  {Number} mouseY             Current vertical mouse position\n         * @param  {Number} parentChartWidth   Parent's chart width\n         * @param  {Number} parentChartHeight  Parent's chart height\n         * @return {Number[]}                  X and Y position\n         * @private\n         */\n        function getTooltipPosition([mouseX, mouseY], [parentChartWidth, parentChartHeight]) {\n            let tooltipX, tooltipY;\n\n            if (hasEnoughHorizontalRoom(parentChartWidth, mouseX)) {\n                tooltipX = mouseX + tooltipOffset.x;\n            } else {\n                tooltipX = mouseX - chartWidth - tooltipOffset.x - margin.right;\n            }\n\n            if (hasEnoughVerticalRoom(parentChartHeight, mouseY)) {\n                tooltipY = mouseY + tooltipOffset.y;\n            } else {\n                tooltipY = mouseY - chartHeight - tooltipOffset.y - margin.bottom;\n            }\n\n            return [tooltipX, tooltipY];\n        }\n\n        /**\n         * Checks if the mouse is over the bounds of the parent chart\n         * @param  {Number}  chartWidth Parent's chart\n         * @param  {Number}  positionX  Mouse position\n         * @return {Boolean}            If the mouse position allows space for the tooltip\n         */\n        function hasEnoughHorizontalRoom(parentChartWidth, positionX) {\n            return (parentChartWidth - margin.left - margin.right - chartWidth) - positionX > 0;\n        }\n\n        /**\n         * Checks if the mouse is over the bounds of the parent chart\n         * @param  {Number}  chartWidth Parent's chart\n         * @param  {Number}  positionX  Mouse position\n         * @return {Boolean}            If the mouse position allows space for the tooltip\n         */\n        function hasEnoughVerticalRoom(parentChartHeight, positionY) {\n            return (parentChartHeight - margin.top - margin.bottom - chartHeight) - positionY > 0;\n        }\n\n        /**\n         * Hides the tooltip\n         * @return {void}\n         */\n        function hideTooltip() {\n            svg.style('display', 'none');\n        }\n\n        /**\n         * Shows the tooltip updating it's content\n         * @param  {Object} dataPoint Data point from the chart\n         * @return {void}\n         */\n        function showTooltip(dataPoint) {\n            updateContent(dataPoint);\n            svg.style('display', 'block');\n        }\n\n        /**\n         * Draws the data entries inside the tooltip for a given topic\n         * @param  {Object} topic Topic to extract data from\n         * @return void\n         */\n        function updateContent(dataPoint = {}){\n            let value = dataPoint[valueLabel] || '',\n                name = dataPoint[nameLabel] || '',\n                lineHeight = textSize * textLineHeight,\n                valueLineHeight = valueTextSize * valueTextLineHeight,\n                defaultDy = '1em',\n                temporalHeight = 0,\n                tooltipValue,\n                tooltipName,\n                tooltipTitle;\n\n            tooltipTextContainer.selectAll('text')\n                .remove();\n\n            if (title) {\n                tooltipTitle = tooltipTextContainer\n                  .append('text')\n                    .classed('mini-tooltip-title', true)\n                    .attr('dy', defaultDy)\n                    .attr('y', 0)\n                    .style('fill', titleFillColor)\n                    .style('font-size', textSize)\n                    .text(title);\n\n                temporalHeight = lineHeight + temporalHeight;\n            }\n\n            if (name) {\n                tooltipName = tooltipTextContainer\n                  .append('text')\n                    .classed('mini-tooltip-name', true)\n                    .attr('dy', defaultDy)\n                    .attr('y', temporalHeight || 0)\n                    .style('fill', nameTextFillColor)\n                    .style('font-size', textSize)\n                    .text(name);\n\n                temporalHeight = lineHeight + temporalHeight;\n            }\n\n            if (value) {\n                tooltipValue = tooltipTextContainer\n                  .append('text')\n                    .classed('mini-tooltip-value', true)\n                    .attr('dy', defaultDy)\n                    .attr('y', temporalHeight || 0)\n                    .style('fill', valueTextFillColor)\n                    .style('font-size', valueTextSize)\n                    .style('font-weight', valueTextWeight)\n                    .text(tooltipValueFormat(value));\n\n                temporalHeight = valueLineHeight + temporalHeight;\n            }\n\n            chartWidth = getMaxLengthLine(tooltipName, tooltipTitle, tooltipValue);\n            chartHeight = temporalHeight;\n        }\n\n        /**\n         * Updates size and position of tooltip depending on the side of the chart we are in\n         * @param  {Object} dataPoint DataPoint of the tooltip\n         * @return void\n         */\n        function updatePositionAndSize(mousePosition, parentChartSize) {\n            let [tooltipX, tooltipY] = getTooltipPosition(mousePosition, parentChartSize);\n\n            svg.transition()\n                .duration(mouseChaseDuration)\n                .ease(ease)\n                .attr('height', chartHeight + margin.top + margin.bottom)\n                .attr('width', chartWidth + margin.left + margin.right)\n                .attr('transform', `translate(${tooltipX},${tooltipY})`);\n\n            tooltipBackground\n                .attr('height', chartHeight + margin.top + margin.bottom)\n                .attr('width', chartWidth + margin.left + margin.right);\n        }\n\n        /**\n         * Updates tooltip content, size and position\n         *\n         * @param  {Object} dataPoint Current datapoint to show info about\n         * @return void\n         */\n        function updateTooltip(dataPoint, position, chartSize) {\n            updateContent(dataPoint);\n            updatePositionAndSize(position, chartSize);\n        }\n\n        /**\n         * Hides the tooltip\n         * @return {Module} Tooltip module to chain calls\n         * @public\n         */\n        exports.hide = function() {\n            hideTooltip();\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets data's nameLabel\n         * @param  {text} _x Desired nameLabel\n         * @return { text | module} nameLabel or Step Chart module to chain calls\n         * @public\n         */\n        exports.nameLabel = function(_x) {\n            if (!arguments.length) {\n                return nameLabel;\n            }\n            nameLabel = _x;\n            return this;\n        };\n\n        /**\n         * Shows the tooltip\n         * @return {Module} Tooltip module to chain calls\n         * @public\n         */\n        exports.show = function() {\n            showTooltip();\n\n            return this;\n        };\n\n        /**\n         * Gets or Sets the title of the tooltip\n         * @param  {string} _x Desired title\n         * @return { string | module} Current title or module to chain calls\n         * @public\n         */\n        exports.title = function(_x) {\n            if (!arguments.length) {\n                return title;\n            }\n            title = _x;\n            return this;\n        };\n\n        /**\n         * Updates the position and content of the tooltip\n         * @param  {Object} dataPoint       Datapoint of the hovered element\n         * @param  {Array} mousePosition    Mouse position relative to the parent chart [x, y]\n         * @param  {Array} chartSize        Parent chart size [x, y]\n         * @return {module}                 Current component\n         */\n        exports.update = function(dataPoint, mousePosition, chartSize) {\n            updateTooltip(dataPoint, mousePosition, chartSize);\n\n            return this;\n        };\n\n        return exports;\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/charts/mini-tooltip.js","define(function(require) {\n    'use strict';\n\n    var _ = require('underscore'),\n\n        jsonColors = require('json!../json/barColors.json'),\n        jsonLetters = require('json!../json/barDataLetters.json');\n\n\n    function BarDataBuilder(config){\n        this.Klass = BarDataBuilder;\n\n        this.config = _.defaults({}, config);\n\n        this.withLettersFrequency = function(){\n            var attributes = _.extend({}, this.config, jsonLetters);\n\n            return new this.Klass(attributes);\n        };\n\n        this.withColors = function(){\n            var attributes = _.extend({}, this.config, jsonColors);\n\n            return new this.Klass(attributes);\n        };\n\n        /**\n         * Sets the path for fetching the data\n         * @param  {String} path Desired path for test data\n         * @return {BarDataBuilder}      Builder object\n         */\n        this.withPath = function(path){\n            var attributes = _.extend({}, this.config, {\n                jsonURL: path\n            });\n\n            return new this.Klass(attributes);\n        };\n\n        this.build = function() {\n            return this.config.data;\n        };\n    }\n\n    return {\n        BarDataBuilder: BarDataBuilder\n    };\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/fixtures/barChartDataBuilder.js","module.exports = {\n\t\"data\": [\n\t\t{\n\t\t\t\"name\": \"Radiating\",\n\t\t\t\"value\": 2\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Opalescent\",\n\t\t\t\"value\": 4\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Shining\",\n\t\t\t\"value\": 3\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Vibrant\",\n\t\t\t\"value\": 6\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Vivid\",\n\t\t\t\"value\": 6\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Brilliant\",\n\t\t\t\"value\": 1\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.5.4@json-loader!./test/json/barColors.json\n// module id = 27\n// module chunks = 0","module.exports = {\n\t\"data\": [\n\t\t{\n\t\t\t\"name\": \"A\",\n\t\t\t\"value\": 0.08167\n\t\t},\n\t\t{\n\t\t\t\"name\": \"B\",\n\t\t\t\"value\": 0.01492\n\t\t},\n\t\t{\n\t\t\t\"name\": \"C\",\n\t\t\t\"value\": 0.02782\n\t\t},\n\t\t{\n\t\t\t\"name\": \"D\",\n\t\t\t\"value\": 0.04253\n\t\t},\n\t\t{\n\t\t\t\"name\": \"E\",\n\t\t\t\"value\": 0.12702\n\t\t},\n\t\t{\n\t\t\t\"name\": \"F\",\n\t\t\t\"value\": 0.02288\n\t\t},\n\t\t{\n\t\t\t\"name\": \"G\",\n\t\t\t\"value\": 0.02015\n\t\t},\n\t\t{\n\t\t\t\"name\": \"H\",\n\t\t\t\"value\": 0.06094\n\t\t},\n\t\t{\n\t\t\t\"name\": \"I\",\n\t\t\t\"value\": 0.06966\n\t\t},\n\t\t{\n\t\t\t\"name\": \"J\",\n\t\t\t\"value\": 0.00153\n\t\t},\n\t\t{\n\t\t\t\"name\": \"K\",\n\t\t\t\"value\": 0.00772\n\t\t},\n\t\t{\n\t\t\t\"name\": \"L\",\n\t\t\t\"value\": 0.04025\n\t\t},\n\t\t{\n\t\t\t\"name\": \"M\",\n\t\t\t\"value\": 0.02406\n\t\t},\n\t\t{\n\t\t\t\"name\": \"N\",\n\t\t\t\"value\": 0.06749\n\t\t},\n\t\t{\n\t\t\t\"name\": \"O\",\n\t\t\t\"value\": 0.07507\n\t\t},\n\t\t{\n\t\t\t\"name\": \"P\",\n\t\t\t\"value\": 0.01929\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Q\",\n\t\t\t\"value\": 0.00095\n\t\t},\n\t\t{\n\t\t\t\"name\": \"R\",\n\t\t\t\"value\": 0.05987\n\t\t},\n\t\t{\n\t\t\t\"name\": \"S\",\n\t\t\t\"value\": 0.06327\n\t\t},\n\t\t{\n\t\t\t\"name\": \"T\",\n\t\t\t\"value\": 0.09056\n\t\t},\n\t\t{\n\t\t\t\"name\": \"U\",\n\t\t\t\"value\": 0.02758\n\t\t},\n\t\t{\n\t\t\t\"name\": \"V\",\n\t\t\t\"value\": 0.00978\n\t\t},\n\t\t{\n\t\t\t\"name\": \"W\",\n\t\t\t\"value\": 0.0236\n\t\t},\n\t\t{\n\t\t\t\"name\": \"X\",\n\t\t\t\"value\": 0.0015\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Y\",\n\t\t\t\"value\": 0.01974\n\t\t},\n\t\t{\n\t\t\t\"name\": \"Z\",\n\t\t\t\"value\": 0.00074\n\t\t}\n\t]\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.5.4@json-loader!./test/json/barDataLetters.json\n// module id = 28\n// module chunks = 0"],"sourceRoot":""}